(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){function LList(){this.first=null;this.last=null;this.length=0}LList.prototype={constructor:LList};function LLItem(data){this.next=null;this.prev=null;this.data=data===undefined?null:data;this.list=null}LList.prototype.push=function(data){var newItem=new LLItem(data);newItem.list=this;this.length++;if(this.first===null){this.first=newItem;this.last=newItem}else{newItem.prev=this.last;this.last.next=newItem;this.last=newItem}return this.length};LList.prototype.unshift=function(data){var newItem=new LLItem(data);newItem.list=this;this.length++;if(this.first===null){this.first=newItem;this.last=newItem}else{newItem.next=this.first;this.first.prev=newItem;this.first=newItem}return this.length};LList.prototype.pop=function(){if(this.last===null)return 0;this.last.prev.next=null;this.last=this.last.prev;this.length--;return this.length};LList.prototype.shift=function(){if(this.first===null)return 0;this.first.next.prev=null;this.first=this.first.next;this.length--;return this.length};LList.prototype.asArray=function(){var result=[];var item=this.first;while(item!==null){result.push(item.data);item=item.next}return result};LList.prototype.item=function(index){if(this.first===null)return null;if(index>this.length||this.length===1)return this.last;var i,item;if(index<0){i=1;var absIndex=Math.abs(index);item=this.last;while(item!==null){if(i===absIndex)return item;item=item.prev;i++}}else if(index<this.length/2){i=0;item=this.first;while(item!==null){if(i===index)return item;item=item.next;i++}}else{i=this.length-1;item=this.last;while(item!==null){if(i===index)return item;item=item.prev;i--}}return null};LList.prototype.data=function(index){var item=this.item(index);if(item!==null)return item.data;return null};LList.prototype.map=function(func){var index=0,result=new LList,item=this.first;if(typeof func!=="function"){console.warn("LList.map: Function is required as argument, but "+typeof func+" is given.");return result}while(item!==null){result.push(func.call(item,item.data,index,this));item=item.next;index++}return result};LList.prototype.withEach=function(func){var index=0,item=this.first,result;if(typeof func!=="function"){console.warn("LList.withEach: Function is required as argument, but "+typeof func+" is given.");return this}while(item!==null){result=func.call(item,item.data,index,this);if(result!==undefined)item.data=result;item=item.next;index++}return this};LLItem.prototype.delete=function(){if(this.prev!==null)this.prev.next=this.next;if(this.next!==null)this.next.prev=this.prev;if(this.list.first===this)this.list.first=this.next;if(this.list.last===this)this.list.last=this.prev;delete this.next;delete this.prev;return--this.list.length};LList.prototype.delete=function(index){var item=this.item(index);if(item!==null)item.delete();return this.length};LList.prototype.indexOf=function(data){var item=this.first,index=0;while(item!==null){if(item.data===data)return index;item=item.next;index++}return-1};LList.prototype.has=function(data){return this.indexOf(data)>=0};if(typeof module!=="undefined")module.exports=LList},{}],2:[function(require,module,exports){var uilist={};var UIInstance=require("./UIInstance");var UIElement=require("./UIElement");function UI(scheme,rules){this.elements={};this.scheme=scheme;this.rules=rules;this.prefix="";this.name="";this.withEach=null;function clone(name,value,elements){if(typeof value=="object"){for(var p in value){clone(p,value[p],elements)}}elements[name]={children:value}}for(var k in scheme){clone(k,scheme[k],this.elements)}}UI.prototype={constructor:UI};UI.prototype.build=function(container,atStart){var inst=new UIInstance;inst.ui(this);if(atStart===undefined||atStart===null)atStart=false;if(container instanceof UIElement){inst.parent(container);container=container.node}function parseParameters(str){var params={};params.tag=str.match(/@\w+[_-\w]*/gi);params.id=str.match(/#\w+[_-\w]*/gi);params.class=str.match(/\.\w+[_-\w\s]*/gi);params.child=str.match(/\|\w+[_-\w]*/gi);params.attributes={};var att=str.match(/\[(\w+[_-\w]*=\w+[_-\w]*[;]?)+\]/gi);att!==null&&att.length>0?att=att[0].slice(1,-1):att="";att=att.split(";");var p;for(var i=0;i<att.length;i++){p=att[i].split("=");if(p.length===2){params.attributes[p[0]]=p[1]}}params.properties={};var pr=str.match(/\((\w+[_-\w]*=\w+[_-\w]*[;]?)+\)/gi);pr!==null&&pr.length>0?pr=pr[0].slice(1,-1):pr="";pr=pr.split(";");var p;for(var i=0;i<pr.length;i++){p=pr[i].split("=");if(p.length===2){params.properties[p[0]]=p[1]}}if(params.tag!==null)params.tag=params.tag[0].slice(1).trim();if(params.id!==null)params.id=params.id[0].slice(1).trim();if(params.class!==null)params.class=params.class[0].slice(1).trim();if(params.child!==null)params.child=params.child[0].slice(1).trim();return params}function append(name,obj,container,atStart){if(atStart===undefined||atStart===null)atStart=false;var params;if(typeof obj==="string"){params=parseParameters(obj)}else if(typeof this.rules[name]==="string"){params=parseParameters(this.rules[name])}else{params=parseParameters("")}params.name=name;var el=new UIElement(params);el.node.uiinstance=inst;el.node.uielement=el;inst[name]=el;if(el.class===null){el.class=el.node.uiinstance.ui().prefix+"-"+name;el.node.className=el.class}if(this.elements.hasOwnProperty(name)&&typeof this.elements[name]==="object"){for(var p in this.elements[name]){el.node[p]=this.elements[name][p]}}if(atStart){var first=container.firstChild;if(first!==null){container.insertBefore(el.node,first)}else{container.appendChild(el.node)}}else{container.appendChild(el.node)}if(typeof obj==="object"){for(var p in obj){append.call(this,p,obj[p],el.node,false)}}}for(var k in this.scheme){append.call(this,k,this.scheme[k],container,atStart)}if(typeof this.withEach==="function")this.withEach.call(inst);return inst};function register(data){if(!data.hasOwnProperty("name")){console.warn("UIBuilder - UI register: name of a new UI is not defined.");return false}if(typeof data.name!=="string"){console.warn("UIBuilder - UI register: name of a new UI is "+typeof data.rules+". String required.");return false}if(uilist.hasOwnProperty(data.name)){console.warn('UIBuilder - UI register: UI with name "'+data.name+'" already registered.');return false}if(!data.hasOwnProperty("scheme")){console.warn('UIBuilder - UI register: scheme for a new UI "'+data.name+'" absent.');return false}if(!data.hasOwnProperty("rules"))data.rules={};if(typeof data.rules!=="object"){console.warn('UIBuilder - UI register: rules for a new UI "'+data.name+'" is '+typeof data.rules+". Object required.");data.rules={}}uilist[data.name]=new UI(data.scheme,data.rules);uilist[data.name].prefix=data.name;uilist[data.name].name=data.name;return true}function getByName(name){if(uilist.hasOwnProperty(name))return uilist[name];return null}UI.register=register;UI.getByName=getByName;module.exports=UI},{"./UIElement":3,"./UIInstance":4}],3:[function(require,module,exports){var globalName=require("./settings").globalName;var LList=require("llist");function UIElement(params){this.name=params.name;this.child=params.child!==undefined?params.child:null;this.class=params.class!==undefined?params.class:null;this.id=params.id!==undefined?params.id:null;this.tag=params.tag!==null&&params.tag!==undefined?params.tag:"div";if(this.tag==="")this.tag="div";this.node=document.createElement(this.tag);this.uiinstance=null;this.node.uiinstance=null;this.node.uielement=null;this.children=[];this.events={};for(var p in params.attributes){this.node.setAttribute(p,params.attributes[p])}for(var p in params.properties){this.node[p]=params.properties[p]}if(typeof this.class==="string")this.node.className=this.class;if(typeof this.id==="string")this.node.id=this.id}UIElement.prototype={constructor:UIElement};UIElement.prototype.addEventListener=function(eventName,callback){if(eventName.slice(0,2)!=="on")eventName="on"+eventName;if(this.events[eventName]===undefined||this.events[eventName]===null)this.events[eventName]=new LList;if(this.events[eventName].indexOf(callback)>=0)return console.warn('Widgets: handler for the event "'+eventName+'" already added.');this.events[eventName].push(callback);this.node[eventName]=this.runEvent};UIElement.prototype.runEvent=function(e){var handlers=this.uielement.events["on"+e.type];var uiinstance=this.uiinstance;handlers.withEach(function(data){data.call(uiinstance,e)})};UIElement.prototype.removeChildren=function(){for(var i=0;i<this.children.length;i++)this.children[i].remove();this.children=[]};UIElement.prototype.remove=function(){delete this.node.uiinstance[this.name];this.node.parentNode.removeChild(this.node)};UIElement.prototype.addChild=function(atStart){if(atStart===undefined||atStart===null)atStart=false;if(this.child===null)return null;var ui=window[globalName](this.child);if(ui===null)return null;return this.addOne(ui,atStart)};UIElement.prototype.addOne=function(ui,atStart){if(atStart===undefined||atStart===null)atStart=false;var uiInst=ui.build(this.node,atStart);if(atStart&&this.children.length>0){this.children.unshift(uiInst)}else{this.children.push(uiInst)}uiInst.parent(this);return uiInst};UIElement.prototype.html=function(html){if(html===undefined)return this.node.innerHTML;this.node.innerHTML=html};UIElement.prototype.attr=function(name,value){if(value===undefined)return this.node.getAttribute(name);this.node.setAttribute(name,value)};UIElement.prototype.prop=function(name,value){if(value===undefined)return this.node[name];this.node[name]=value};UIElement.prototype.val=function(val){if(val===undefined)return this.node.value;this.node.value=val};UIElement.prototype.src=function(val){if(val===undefined)return this.node.src;this.node.src=val};UIElement.prototype.href=function(val){if(val===undefined)return this.node.href;this.node.href=val};UIElement.prototype.getContext=function(val){if(val===undefined)return this.node.getContext("2d");return this.node.getContext(val)};UIElement.prototype.width=function(val){if(val===undefined)return this.node.width;return this.node.width=val};UIElement.prototype.height=function(val){if(val===undefined)return this.node.height;return this.node.height=val};UIElement.prototype.hide=function(){if(this.node.style.display==="none")return;this.node.oldDisplay=this.node.style.display;return this.node.style.display="none"};UIElement.prototype.show=function(){if(this.node.style.display!=="none"&&this.node.offsetParent!==null)return;if(this.node.hasOwnProperty("oldDisplay")&&this.node.oldDisplay!=="none"){this.node.style.display=this.node.oldDisplay}else{this.node.style.display="flex"}};UIElement.prototype.hasClass=function(className){if(this.node.className===className)return true;var curClass=this.node.className.trim();var index=curClass.indexOf(className);if(index<0)return false;return!(curClass.length!==className.length&&curClass[index-1]!==" "&&(curClass.length>index+className.length+1&&curClass[index+className.length+1]!==" "))};UIElement.prototype.addClass=function(className){if(this.hasClass(className))return false;this.node.className+=" "+className;this.class=this.node.className;return true};UIElement.prototype.removeClass=function(className){var arr=[];if(typeof className==="string"){arr.push(className)}else if(Array.isArray(className)){arr=className}else{return false}var result=false;for(var i=0;i<arr.length;i++){var classToDelete=arr[i];if(!this.hasClass(classToDelete))continue;var curClass=this.node.className.trim();var index=curClass.indexOf(classToDelete);if(this.node.className===classToDelete){this.node.removeAttribute("class");result=true}else if(index+classToDelete.length===curClass.length){this.node.className=this.node.className.replace(" "+classToDelete,"");if(curClass!==this.node.className)result=true}else{this.node.className=this.node.className.replace(classToDelete+" ","");if(classToDelete!==this.node.className)result=true}this.class=this.node.className}return result};module.exports=UIElement},{"./settings":6,llist:1}],4:[function(require,module,exports){var UIElement=require("./UIElement");function UIInstance(){var _parent=null;var _ui=null;this.parent=function(p){if(p===undefined)return _parent;_parent=p};this.ui=function(ui){if(ui===undefined)return _ui;_ui=ui}}UIInstance.prototype={constructor:UIInstance};UIInstance.prototype.remove=function(){var parent=this.parent();for(var i=0;i<parent.children.length;i++){if(parent.children[i]===this){var scheme=this.ui().scheme;for(var p in scheme)parent.node.removeChild(this[p].node);parent.children.splice(i,1);break}}};UIInstance.prototype.parentUII=function(){var parent=this.parent();if(parent instanceof UIElement)return parent.uiinstance;return null};module.exports=UIInstance},{"./UIElement":3}],5:[function(require,module,exports){var UI=require("./UI");var Settings=require("./settings");var UIBuilder=function(uiname){return UI.getByName(uiname)};UIBuilder.register=UI.register;UIBuilder.UI=UI;UIBuilder.UIInstance=require("./UIInstance");UIBuilder.UIElement=require("./UIElement");window[Settings.globalName]=UIBuilder;module.exports=UIBuilder},{"./UI":2,"./UIElement":3,"./UIInstance":4,"./settings":6}],6:[function(require,module,exports){exports.globalName="UIBuilder"},{}]},{},[5]);