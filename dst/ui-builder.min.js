(function(){"use strict";function e(e){return e.replace(/([A-Z]+)/g,",$1").replace(/^,/,"").split(",")}function t(t){return e(t.replace(/\//g,"_").replace(" - ","-")).join("-").replace(/([a-zA-Z_-])\s+([a-zA-Z_\-\d])/g,"$1-$2").replace(/\s*-+\s*/gi,"-").replace(/-*_-*/gi,"_").toLowerCase()}function n(e){this.message=e}function r(e){n.call(this,e),this.name="UI registration."}function o(e){n.call(this,e),this.name="Invalid scheme."}function s(e){n.call(this,e),this.name="Rendering error."}function d(){let e=Array.prototype.slice.call(arguments);Ge.logging&&console.log.apply(console,ze(e))}function l(){let e=Array.prototype.slice.call(arguments);Ge.logging&&console.warn.apply(console,ze(e))}function p(e){if(Ge.logging){let t=Array.prototype.slice.call(arguments);e instanceof n?e.log():console.error.apply(console,ze(t))}}function c(e){e.hasOwnProperty("__")||(e.__={}),e.__.events={},e.__.dispatchers={},e.__.eventsTimeouts={},e.listen=function(e,t){let n=null,r=e.split("->");return 2===r.length&&(e=r[0].trim(),n=r[1].trim()),e=e.toLowerCase(),this.__.dispatchers.hasOwnProperty(e)||(this.__.dispatchers[e]=new Xe(e)),null!==n&&"function"==typeof t&&this.__.dispatchers[e].on(n,t),this.__.dispatchers[e]},e.addEventListener=function(e,t){let n=null,r=e.split("->");if(2===r.length&&(e=r[0].trim(),n=r[1].trim()),e=e.toLowerCase(),"function"!=typeof t)throw new EventException("Type of handler is not a function");if(null!==n)this.listen(e).onPort(n,t);else{if(Array.isArray(this.__.events[e])||(this.__.events[e]=[]),0<=this.__.events[e].indexOf(t))return;this.__.events[e].push(t)}return this},e.on=e.addEventListener,e.removeEventListener=function(e,t){if(e=e.toLowerCase(),!this.__.events.hasOwnProperty(e))return this;if(void 0===t)delete this.__.events[e],this.__.events[e]=[];else{if("function"!=typeof t)throw new EventException("Type of handler is not a function");let n=this.__.events[e].indexOf(t);if(0>n)return this;this.__.events[e].splice(n,1)}return this},e.off=e.removeEventListener,e.triggerEvent=function(e){e=e.toLowerCase();let t=0,n=e.split("~");1<n.length&&(t=parseInt(n[1].trim())),e=n[0].trim();let r=[];for(let t=1,n=arguments.length;t<n;t++)r.push(arguments[t]);if(void 0!==this.__.eventsTimeouts&&clearTimeout(this.__.eventsTimeouts[e]),this.__.dispatchers.hasOwnProperty(e)&&(0<t?this.__.eventsTimeouts[e]=setTimeout(function(e,t,n){e.__.dispatchers[t].runHandlers(e,n)},t,this,e,r):this.__.dispatchers[e].runHandlers(this,r)),!!this.__.events.hasOwnProperty(e))if(0<t)this.__.eventsTimeouts[e]=setTimeout(function(e,t,n){for(let r=0;r<e.__.events[t].length;r++)e.__.events[t][r].apply(e,n)},t,this,e,r);else for(let t=0;t<this.__.events[e].length;t++)this.__.events[e][t].apply(this,r)},e.interruptEvent=function(e){return clearTimeout(this.__.eventsTimeouts[e]),this},e.offPort=function(e,t){if(t===void 0){let n=e.split("->");2===n.length&&(e=n[0].trim(),t=n[1].trim())}e=e.toLowerCase(),this.__.dispatchers.hasOwnProperty(e)&&this.__.dispatchers[e].offPort(t)},e.offAllPorts=function(e){e=e.toLowerCase(),this.__.dispatchers.hasOwnProperty(e)&&this.__.dispatchers[e].offAllPorts()},e.trigger=e.triggerEvent}function u(e){let t={};for(let n in e)e.hasOwnProperty(n)&&(t[n]=Array.isArray(e[n])?e[n].slice(0):null!==e[n]&&"object"==typeof e[n]&&e[n].constructor===Object&&null!==e[n]?u(e[n]):e[n]);return t}function g(e,t){for(let n in e)e.hasOwnProperty(n)&&(Array.isArray(e[n])?t[n]=e[n].slice(0):"object"==typeof e[n]?(t[n]={},g(e[n],t[n])):t[n]=e[n])}function h(e,t){for(let n in e)e.hasOwnProperty(n)&&("object"!=typeof e[n]||e[n].constructor!==Object?t[n]=e[n]:("object"!=typeof t[n]&&(t[n]={}),h(e[n],t[n])));return t}function m(e){return Ke.hasOwnProperty(e)?Ke[e]:null}function _(e){"function"!=typeof e&&this.triggerEvent("error"),e(this.cache,this),this.triggerEvent("dataReady",this.cache)}function b(t){let e=this.uielement.__.events[t.type];for(let n=0;n<e.length;n++)e[n].call(this.uielement,this.uiinstance,t)}function w(){function e(){}let t;return e.prototype.value=function(e){return void 0!==e&&(t=e),t},e.prototype.isEmpty=function(){for(let e in this)if(this.hasOwnProperty(e)&&(null===this[e]||void 0===this[e]||""===this[e]))return!1;return!0},new e}function O(e,t,n,r,o){"object"!=typeof n&&(n=t);let s=null,d;if(e.hasAttr("name")&&""!==e.attr("name")){s=e.attr("name");let n=new Event("gather");if(e.triggerEvent("gather",t,n),0<=["INPUT","TEXTAREA","SELECT"].indexOf(e.tagName()))return"checkbox"!==e.attr("type")||e.prop("checked")?(t.value(e.val()),t):t}if("string"!=typeof r&&(r=s),e.hasInclusion()){let o=w();if(P(e.inclusion(),o,null,n,r),(0<Object.keys(o).length||"function"==typeof o.value&&void 0!==o.value())&&!t.hasOwnProperty(r))if(null===s)for(let e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);else if(void 0!==o.value())t.value(o.value());else if(0<Object.keys(o).length)for(let e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}else if(e.hasChildUI()){let o=[];if(null!==s||null!==r){d=e.children();for(let e=0,t;e<d.length;e++)if(t=w(),P(d[e],t,null,n,r),"function"==typeof t.value&&void 0!==t.value())o.push(t.value());else if(0<Object.keys(t).length){let e={};for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);o.push(e)}null===s?null!==r&&(null===n?t[r]=o:n[r]=o):t[s]=o}}else if(0<e.children().length){d=e.children();for(let e=0;e<d.length;e++)if(void 0!==d[e].getRootElement){let o=d[e].getRootElement();o.hasAttr("name")&&(s=o.attr("name"));let l=w();if(P(d[e],l,null,n,r),null===s)for(let e in l)l.hasOwnProperty(e)&&(t[e]=l[e]);else if("function"==typeof l.value&&void 0!==l.value())t[s]=l.value();else if(0<Object.keys(l).length){let e={};for(let t in l)l.hasOwnProperty(t)&&(e[t]=l[t]);t[s]=e}}}else if(!0===o){let r=e.__.node.childNodes;for(let e=0;e<r.length;e++){if(void 0===r[e]||void 0===r[e].element)continue;let o=r[e].element.attr("name"),s=w();if(O(r[e].uielement,s,n,""===o?null:o,!0),"string"!=typeof o||""===o)for(let e in s)s.hasOwnProperty(e)&&(t[e]=s[e]);else if("function"==typeof s.value&&void 0!==s.value())t[o]=s.value();else if(0<Object.keys(s).length){let e={};for(let t in s)s.hasOwnProperty(t)&&(e[t]=s[t]);t[o]=e}}}}function P(e,t,n,r,o){(void 0===n||null===n)&&(n=e.__.ui.scheme),void 0===t&&(t={});let s=new Event("gather",{cancelable:!0});if(e.triggerEvent("gather",t,s),s.defaultPrevented)return;if(e.ui().triggerEvent("gather",e,t,s),s.defaultPrevented)return;let d,l;for(let c in n){if(!n.hasOwnProperty(c)||!e.hasOwnProperty(c))continue;O(e[c],d=w(),r,o);let p=e[c].attr("name");if("function"==typeof d.value&&void 0!==d.value()&&""!==p)E(t,p,d.value());else{for(let e in l=Object.keys(d),d)d.hasOwnProperty(e)&&E(t,e,d[e]);d="object"==typeof d[l[0]]?d[l[0]]:t}let u=n[c];"object"==typeof u&&P(e,d,u,r,o)}}function E(e,t,n){Array.isArray(e)?e.push(n):e.hasOwnProperty(t)?(!Array.isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n}function v(e){for(let t in e)if(e.hasOwnProperty(t))if(Array.isArray(e[t])){let n=[];for(let r=0;r<e[t].length;r++)if("object"==typeof e[t][r]){let o=Object.keys(e[t][r]);if(1===o.length)n.push(e[t][r][o[0]]);else return}else return;e[t]=n}else"object"==typeof e[t]&&v(e[t])}function C(){if(!this.isTab())return;let e=this.getAllNearbyElements();for(let t=0,n=e.length;t<n;t++)e[t].isTab()&&(e[t].removeClass("active"),e[t].__.tabContainer.fadeOut(100,function(){this.hide()}));this.addClass("active");let t=this.__.tabContainer;setTimeout(function(){t.fadeIn(100,"flex")},100),t.addClass("active")}function k(e,t){for(let n in e)if(e.hasOwnProperty(n))if("object"==typeof e[n])k(e[n],t),t[n]={name:n,rules:"",children:e[n]};else if("string"==typeof e[n])t[n]={name:n,rules:e[n],children:null};else if(!1===e[n])delete e[n];else throw new o("Value of the element must be string or object.")}function T(e){let t={parameters:{}},n=e.match(Ge.regexp_params);e=e.replace(Ge.regexp_params,""),n=null!==n&&0<n.length?n[0].slice(1,-1):"",n=n.split(";");for(let r=0,o;r<n.length;r++)if(o=n[r].split("="),2===o.length){if(""===o[0].trim())continue;t.parameters[o[0].trim()]=o[1].trim()}t.attributes={};let r=e.match(Ge.regexp_attribute);e=e.replace(Ge.regexp_attribute,""),r=null!==r&&0<r.length?r[0].slice(1,-1):"",r=r.split(";");let o;for(let n=0;n<r.length;n++)if(o=r[n].split("="),2===o.length){if(""===o[0].trim())continue;t.attributes[o[0].trim()]=o[1].trim()}t.properties={};let s=e.match(Ge.regexp_property);e=e.replace(Ge.regexp_property,""),s=null!==s&&0<s.length?s[0].slice(1,-1):"",s=s.split(";");for(let n=0;n<s.length;n++)if(o=s[n].split("="),2===o.length){if(""===o[0].trim())continue;t.properties[o[0].trim()]=o[1].trim()}return t.tag=e.match(Ge.regexp_tagName),t.id=e.match(Ge.regexp_id),t.class=e.match(Ge.regexp_class),t.child=e.match(Ge.regexp_childUI),t.include=e.match(Ge.regexp_include),null!==t.tag&&(t.tag=t.tag[0].slice(1).trim()),null!==t.id&&(t.id=t.id[0].slice(1).trim()),null!==t.class&&(t.class=t.class[0].slice(1).trim()),null!==t.child&&(t.child=t.child[0].slice(1).trim()),null!==t.include&&(t.include=t.include[0].slice(3).trim()),t}function I(e,n,r,o,d){"boolean"!=typeof d&&(d=!1);let l,c;if("object"==typeof r)for(let u in r){if(!r.hasOwnProperty(u))continue;if(e.hasOwnProperty(u))continue;if("string"==typeof r[u]?l=T(r[u]):"object"==typeof r[u]&&(n.rules.hasOwnProperty(u)?l=T(n.rules[u]):l={id:null,class:t(u),tag:"div",child:null,include:null,attributes:{},properties:{},parameters:{}}),Ge.devMode){let e=Ve.get(l.child);if(null!==e&&n.dependencies.hasOwnProperty(u)){let t=n.dependencies[u];for(let n=0,r=t.length;n<r;n++)e.isImplementationOf(t[n])||p("UI \""+e.name+"\" does't implement interface \""+t[n]+"\".")}}(""===l.class||null===l.class)&&(l.class=t(u));let g=t(n.name);n.scheme===r&&l.class!==g&&(l.class=g+" "+l.class),l.name=u;let h=new et(l);if(h.__.uiinstance=e,h.__.node.uiinstance=e,h.__.instance=e,h.__.node.instance=e,null!==l.include){let e=Ve.get(l.include);if(null!==e){if(Ge.devMode&&n.dependencies.hasOwnProperty(u)){let t=n.dependencies[u];for(let n=0;n<t;n++)e.isImplementationOf(t[n])||p("UI \""+e.name+"\" does't implement interface \""+t[n]+"\".")}for(let t in e.__.params)!l.parameters.hasOwnProperty(t)&&e.__.params.hasOwnProperty(t)&&(l.parameters[t]=e.__.params[t]);h.__.inclusion=h.add(e,l.parameters)}else throw new s("Required for including UI \""+l.include+"\" is not registered yet.")}if(null!==e.__.localization&&null!==e.__.translations&&e.__.translations.hasOwnProperty(h.__.name)&&(null===h.__.inclusion?(h.__.node.setAttribute("localization",e.__.localization),h.__.node.T=e.__.translations[h.__.name]):h.__.inclusion.triggerEvent("localization",e.__.localization,e.__.translations[h.__.name])),e[u]=h,n.translations.hasOwnProperty(u)){let e=L10n.getTranslations(n.localization);"INPUT"===h.__.node.tagName?h.attr("placeholder",e(n.translations[u])):null===h.__.inclusion&&h.text(e(n.translations[u]))}if(o instanceof et?(h.__.parent=o,o[u]=h,c=o.__.node):"string"==typeof o?c=document.querySelector(o):c=o,null!==o)if(d){let e=c.firstChild;null===e?c.appendChild(h.__.node):c.insertBefore(h.__.node,e)}else c.appendChild(h.__.node);"object"==typeof r[u]&&I(e,n,r[u],h)}}function N(e){let t=/^\d+(\.?\d+)?$/i;return"null"===e?e=null:"true"===e?e=!0:"false"===e?e=!1:t.test(e)&&(e=+e),e}function L(e){if(!e.hasOwnProperty("name"))throw new r("Name of a new UI is not defined.");if("string"!=typeof e.name)throw new r("Name of a new UI is "+typeof e.name+". String required.");if(null!==Ve.get(e.name))throw new r("UI with name \""+e.name+"\" already registered.");if(e.hasOwnProperty("scheme")||(e.scheme={}),"object"!=typeof e.scheme)throw new r("Scheme for a new UI \""+e.name+"\" is "+typeof e.scheme+". Object required.");if(e.hasOwnProperty("rules")||(e.rules={}),"object"!=typeof e.rules)throw new r("Rules for a new UI \""+e.name+"\" is "+typeof e.rules+". Object required.")}function S(){Object.defineProperty(this,"__",{value:{},configurable:!1,enumerable:!1,writeable:!1}),this.__.extensions={},this.__.events={},this.__.dispatchers={},this.__.eventsTimeouts={},this.__.ui=null,this.__.parent=null,this.__.data=null,this.__.params={}}function A(e,n,r){n===void 0&&(n="");let o=[];for(let s in e){if(!e.hasOwnProperty(s))continue;let d=e[s],l="",p,c;if(!this.elements.hasOwnProperty(s)&&"@"===s[0]){if("@keyframes"===s.slice(0,10)){for(let e in l+=s+"{\n",d)if(d.hasOwnProperty(e))if("string"==typeof d[e])l+="    "+t(e)+": "+(""===d[e]?"\"\"":d[e])+";\n";else if("object"==typeof d[e]){let n="    "+e+" {\n";for(let r in d[e])d[e].hasOwnProperty(r)&&(n+="        "+t(r)+": "+d[e][r]+";\n");n+="    }\n",l+=n}l+="}\n",o.push(l)}else"object"==typeof d&&(l+=n+s+"{\n",l+=A.call(this,d),l+="}\n",o.push(l));continue}this.elements.hasOwnProperty(s)?(c=T(this.elements[s].rules),p=null===c.id?"."+(null===c.class?t(s):c.class.split(" ").join(".")):"#"+c.id,p=(this.elements.hasOwnProperty(r)&&this.elements[r].children.hasOwnProperty(s)?" > ":" ")+p):p=t(s);let u=t(this.name),g=this.getRootElement();if(null!==g){c=T(g.rules);let e=null===c.class?t(g.name):c.class.split(" ").join(".");g===this.elements[s]&&(p=""),u=null===c.id?"."+t(this.name)+"."+e:"#"+c.id}(0<=n.indexOf(u)||0<=p.indexOf(u))&&(u="");let h=o.length;for(let e in o.push(""),l+=((u+" "+n).trim()+p).replace("  "," ").replace(" :",":").replace(">:",":")+"{\n",d){if(!d.hasOwnProperty(e))continue;let r=d[e];if("string"==typeof r||"number"==typeof r){let n=r;"content"==e&&(n="attr("===r.slice(0,5)?r:""===r?"\"\"":"\""+r+"\""),l+="    "+t(e)+": "+n+";\n"}else if(void 0!==r.getValue)l+="    "+t(e)+": "+r.getValue()+";\n";else if("object"==typeof r){let t={};t[e]=r,o.push(A.call(this,t,n+p,s))}}l+="}\n",o[h]=l}return o.join("\n")}function B(e){return it.hasOwnProperty(e)?it[e]:null}function R(e){e===void 0?e=ct:ct=e;let t=document.querySelector("style[data-reset=\"ui-builder\"]");if(null===t){t=document.createElement("style"),t.setAttribute("data-reset","ui-builder");let e=document.getElementsByTagName("head")[0];e.appendChild(t)}t.innerHTML=nt.generateSimpleStyles(e)}function H(e){return Ve.get(e)}function j(e){return ut.hasOwnProperty(e)?ut[e]:null}function D(e){return ut.hasOwnProperty(e)?new mt(e):void p("Layout with name \""+e+"\" is not registered yet.")}function U(e){return Object.defineProperty(this,"constructor",{enumerable:!1}),this instanceof U?void this.attachValues("object"==typeof e?e:M(e)):new U(e)}function M(e){let t=[],n=[],r=[],o,s,d,l,p,u,g,h,m,f,_;if(e=re(e.toLowerCase()),o=e.substr(0,1).toUpperCase(),s=e.substr(1),h=1,("R"===o||"Y"===o||"G"===o||"C"===o||"B"===o||"M"===o||"W"===o)&&!isNaN(s))if(6===e.length&&-1===e.indexOf(","));else e="ncol("+e+")";if(3===e.length||6===e.length||isNaN(e)||(e="ncol("+e+")"),0<e.indexOf(",")&&-1===e.indexOf("(")&&(e="ncol("+e+")"),"rgb"===e.substr(0,3)||"hsl"===e.substr(0,3)||"hwb"===e.substr(0,3)||"ncol"===e.substr(0,4)||"cmyk"===e.substr(0,4)){if("ncol"===e.substr(0,4)?(4===e.split(",").length&&-1===e.indexOf("ncola")&&(e=e.replace("ncol","ncola")),d="ncol",e=e.substr(4)):"cmyk"===e.substr(0,4)?(d="cmyk",e=e.substr(4)):(d=e.substr(0,3),e=e.substr(3)),l=3,u=!1,"a"===e.substr(0,1).toLowerCase()?(l=4,u=!0,e=e.substr(1)):"cmyk"===d&&(l=4,5===e.split(",").length&&(l=5,u=!0)),e=e.replace("(",""),e=e.replace(")",""),t=e.split(","),"rgb"===d){if(t.length!==l)return J();for(p=0;p<l;p++){if((""===t[p]||" "===t[p])&&(t[p]="0"),-1<t[p].indexOf("%")&&(t[p]=t[p].replace("%",""),t[p]=+(t[p]/100),3>p&&(t[p]=Be(255*t[p]))),isNaN(t[p]))return J();255<parseInt(t[p])&&(t[p]=255),3>p&&(t[p]=parseInt(t[p])),3===p&&1<+t[p]&&(t[p]=1)}_={r:t[0],g:t[1],b:t[2]},!0===u&&(h=+t[3])}if("hsl"===d||"hwb"===d||"ncol"===d){for(;t.length<l;)t.push("0");for(("hsl"===d||"hwb"===d)&&360<=parseInt(t[0])&&(t[0]=0),p=1;p<l;p++){if(-1<t[p].indexOf("%")){if(t[p]=t[p].replace("%",""),t[p]=+t[p],isNaN(t[p]))return J();t[p]/=100}else t[p]=+t[p];1<+t[p]&&(t[p]=1),0>+t[p]&&(t[p]=0)}"hsl"===d&&(_=K(t[0],t[1],t[2]),m=+t[0],f=+t[1]),"hwb"===d&&(_=z(t[0],t[1],t[2])),"ncol"===d&&(_=G(t[0],t[1],t[2])),!0===u&&(h=+t[3])}if("cmyk"===d){for(;t.length<l;)t.push("0");for(p=0;p<l;p++){if(-1<t[p].indexOf("%")){if(t[p]=t[p].replace("%",""),t[p]=+t[p],isNaN(t[p]))return J();t[p]/=100}else t[p]=+t[p];1<+t[p]&&(t[p]=1),0>+t[p]&&(t[p]=0)}_=F(t[0],t[1],t[2],t[3]),!0===u&&(h=+t[4])}}else if("ncs"===e.substr(0,3))_=W(e);else{for(g=!1,n=ae("names"),p=0;p<n.length;p++)if(e.toLowerCase()===n[p].toLowerCase()){r=ae("hexs"),g=!0,_={r:parseInt(r[p].substr(0,2),16),g:parseInt(r[p].substr(2,2),16),b:parseInt(r[p].substr(4,2),16)};break}if(!1===g){for(e=e.replace("#",""),3===e.length&&(e=e.substr(0,1)+e.substr(0,1)+e.substr(1,1)+e.substr(1,1)+e.substr(2,1)+e.substr(2,1)),p=0;p<e.length;p++)if(!ne(e.substr(p,1)))return J();for(t[0]=parseInt(e.substr(0,2),16),t[1]=parseInt(e.substr(2,2),16),t[2]=parseInt(e.substr(4,2),16),p=0;3>p;p++)if(isNaN(t[p]))return J();_={r:t[0],g:t[1],b:t[2]}}}return q(_,h,m,f)}function F(e,t,n,o){let s,d,l;return s=255-255*Ae(1,e*(1-o)+o),d=255-255*Ae(1,t*(1-o)+o),l=255-255*Ae(1,n*(1-o)+o),{r:s,g:d,b:l}}function G(e,t,n){let r,o,s;if(s=e,isNaN(e.substr(0,1))){if(r=e.substr(0,1).toUpperCase(),o=e.substr(1),""===o&&(o=0),o=+o,isNaN(o))return!1;"R"===r&&(s=.6*o),"Y"===r&&(s=60+.6*o),"G"===r&&(s=120+.6*o),"C"===r&&(s=180+.6*o),"B"===r&&(s=240+.6*o),"M"===r&&(s=300+.6*o),"W"===r&&(s=0,t=1-o/100,n=o/100)}return z(s,t,n)}function z(e,t,n){let r=[],o,s,d;for(s=K(e,1,.5),r[0]=s.r/255,r[1]=s.g/255,r[2]=s.b/255,d=t+n,1<d&&(t=+(t/d).toFixed(2),n=+(n/d).toFixed(2)),o=0;3>o;o++)r[o]*=1-t-n,r[o]+=t,r[o]=+(255*r[o]);return{r:r[0],g:r[1],b:r[2]}}function W(e){let t,n,o,s,d,l,p,c,u,h,m,f,_,v,w,O,P,E;if(e=re(e).toUpperCase(),e=e.replace("(",""),e=e.replace(")",""),e=e.replace("NCS","NCS "),e=e.replace(/\s+/g," "),-1===e.indexOf("NCS")&&(e="NCS "+e),e=e.match(/^(?:NCS|NCS\sS)\s(\d{2})(\d{2})-(N|[A-Z])(\d{2})?([A-Z])?$/),null===e)return!1;if(t=parseInt(e[1],10),n=parseInt(e[2],10),o=e[3],"N"!==o&&"Y"!==o&&"R"!==o&&"B"!==o&&"G"!==o)return!1;if(s=parseInt(e[4],10)||0,"N"!==o){d=1.05*t-5.25,l=n,"Y"===o&&60>=s?u=1:"Y"===o&&60<s||"R"===o&&80>=s?(p="Y"===o?s-60:s+40,u=(je(14884-De(p,2))-22)/100):"R"===o&&80<s||"B"===o?u=0:"G"===o&&(p=s-170,u=(je(33800-De(p,2))-70)/100),"Y"===o&&80>=s?c=0:"Y"===o&&80<s||"R"===o&&60>=s?(p="Y"===o?s-80+20.5:s+20+20.5,c=(104-je(11236-De(p,2)))/100):"R"===o&&60<s||"B"===o&&80>=s?(p="R"===o?s-60-60:s+40-60,c=(je(1e4-De(p,2))-10)/100):"B"===o&&80<s||"G"===o&&40>=s?(p="B"===o?s-80-131:s+20-131,c=(122-je(19881-De(p,2)))/100):"G"===o&&40<s&&(c=0);let e;"Y"===o?e=(85-17/20*s)/100:"R"===o&&60>=s?e=0:"R"===o&&60<s?(p=s-60+35,e=(67.5-je(5776-De(p,2)))/100):"B"===o&&60>=s?(p=1*s-68.5,e=(6.5+je(7044.5-De(p,2)))/100):"B"===o&&60<s||"G"===o&&60>=s?e=.9:"G"===o&&60<s&&(p=s-60,e=(90-1/8*p)/100),p=(u+e+c)/3,h=(p-u)*(100-l)/100+u,m=(p-e)*(100-l)/100+e,f=(p-c)*(100-l)/100+c,_=h>m&&h>f?h:m>h&&m>f?m:f>h&&f>m?f:(h+m+f)/3,v=1/_,O=parseInt(255*(h*v*(100-d)/100),10),P=parseInt(255*(m*v*(100-d)/100),10),E=parseInt(255*(f*v*(100-d)/100),10),255<O&&(O=255),255<P&&(P=255),255<E&&(E=255),0>O&&(O=0),0>P&&(P=0),0>E&&(E=0)}else w=parseInt(255*(1-t/100),10),255<w&&(w=255),0>w&&(w=0),O=w,P=w,E=w;return{r:O,g:P,b:E}}function q(e,t,n,r){let o,s,d,l,p,c,u;return e?(t||(t=1),o=ee(e.r,e.g,e.b),s=X(e.r,e.g,e.b),d=Q(e.r,e.g,e.b),c=n||o.h,u=r||o.s,l=V(c),p={red:e.r,green:e.g,blue:e.b,hue:c,sat:u,lightness:o.l,whiteness:s.w,blackness:s.b,cyan:d.c,magenta:d.m,yellow:d.y,black:d.k,ncol:l,opacity:t,valid:!0},p=Y(p),p):J()}function Y(e){return e.red=+e.red.toFixed(0),e.green=+e.green.toFixed(0),e.blue=+e.blue.toFixed(0),e.hue=+e.hue.toFixed(0),e.sat=+e.sat.toFixed(2),e.lightness=+e.lightness.toFixed(2),e.whiteness=+e.whiteness.toFixed(2),e.blackness=+e.blackness.toFixed(2),e.cyan=+e.cyan.toFixed(2),e.magenta=+e.magenta.toFixed(2),e.yellow=+e.yellow.toFixed(2),e.black=+e.black.toFixed(2),e.ncol=e.ncol.substr(0,1)+Be(+e.ncol.substr(1)),e.opacity=+e.opacity.toFixed(2),e}function V(e){for(;360<=e;)e-=360;return 60>e?"R"+e/.6:120>e?"Y"+(e-60)/.6:180>e?"G"+(e-120)/.6:240>e?"C"+(e-180)/.6:300>e?"B"+(e-240)/.6:360>e?"M"+(e-300)/.6:void 0}function X(e,t,n){let o,s,d;e/=255,t/=255,n/=255;let l=Se(e,t,n),p=Ae(e,t,n),c=l-p;return o=0===c?0:e===l?360*((t-n)/c%6):t===l?360*(((n-e)/c+2)%6):360*(((e-t)/c+4)%6),s=p,d=1-l,{h:o,w:s,b:d}}function Q(e,t,n){let o,s,d,l;e/=255,t/=255,n/=255;let p=Se(e,t,n);return l=1-p,1===l?(o=0,s=0,d=0):(o=(1-e-l)/(1-l),s=(1-t-l)/(1-l),d=(1-n-l)/(1-l)),{c:o,m:s,y:d,k:l}}function J(){return{red:0,green:0,blue:0,hue:0,sat:0,lightness:0,whiteness:0,blackness:0,cyan:0,magenta:0,yellow:0,black:0,ncol:"R",opacity:1,valid:!1}}function K(e,t,n){let o,s,d,l,p;return e/=60,s=.5>=n?n*(t+1):n+t-n*t,o=2*n-s,d=255*Z(o,s,e+2),l=255*Z(o,s,e),p=255*Z(o,s,e-2),{r:d,g:l,b:p}}function Z(e,t,n){return 0>n&&(n+=6),6<=n&&(n-=6),1>n?(t-e)*n+e:3>n?t:4>n?(t-e)*(4-n)+e:e}function ee(e,t,n){let r=[],o,d,p,c,u,g,m;for(r[0]=e/255,r[1]=t/255,r[2]=n/255,o=r[0],d=r[0],g=0,p=0;p<r.length-1;p++)r[p+1]<=o&&(o=r[p+1]),r[p+1]>=d&&(d=r[p+1],g=p+1);return 0===g&&(m=(r[1]-r[2])/(d-o)),1===g&&(m=2+(r[2]-r[0])/(d-o)),2===g&&(m=4+(r[0]-r[1])/(d-o)),isNaN(m)&&(m=0),m*=60,0>m&&(m+=360),c=(o+d)/2,u=o===d?0:.5>c?(d-o)/(d+o):(d-o)/(2-d-o),{h:m,s:u,l:c}}function te(e){let t=e.toString(16);for(;2>t.length;)t="0"+t;return t}function ne(e){return-1<"0123456789ABCDEFabcdef".indexOf(e)}function ae(e){return"names"===e?["AliceBlue","AntiqueWhite","Aqua","Aquamarine","Azure","Beige","Bisque","Black","BlanchedAlmond","Blue","BlueViolet","Brown","BurlyWood","CadetBlue","Chartreuse","Chocolate","Coral","CornflowerBlue","Cornsilk","Crimson","Cyan","DarkBlue","DarkCyan","DarkGoldenRod","DarkGray","DarkGrey","DarkGreen","DarkKhaki","DarkMagenta","DarkOliveGreen","DarkOrange","DarkOrchid","DarkRed","DarkSalmon","DarkSeaGreen","DarkSlateBlue","DarkSlateGray","DarkSlateGrey","DarkTurquoise","DarkViolet","DeepPink","DeepSkyBlue","DimGray","DimGrey","DodgerBlue","FireBrick","FloralWhite","ForestGreen","Fuchsia","Gainsboro","GhostWhite","Gold","GoldenRod","Gray","Grey","Green","GreenYellow","HoneyDew","HotPink","IndianRed","Indigo","Ivory","Khaki","Lavender","LavenderBlush","LawnGreen","LemonChiffon","LightBlue","LightCoral","LightCyan","LightGoldenRodYellow","LightGray","LightGrey","LightGreen","LightPink","LightSalmon","LightSeaGreen","LightSkyBlue","LightSlateGray","LightSlateGrey","LightSteelBlue","LightYellow","Lime","LimeGreen","Linen","Magenta","Maroon","MediumAquaMarine","MediumBlue","MediumOrchid","MediumPurple","MediumSeaGreen","MediumSlateBlue","MediumSpringGreen","MediumTurquoise","MediumVioletRed","MidnightBlue","MintCream","MistyRose","Moccasin","NavajoWhite","Navy","OldLace","Olive","OliveDrab","Orange","OrangeRed","Orchid","PaleGoldenRod","PaleGreen","PaleTurquoise","PaleVioletRed","PapayaWhip","PeachPuff","Peru","Pink","Plum","PowderBlue","Purple","RebeccaPurple","Red","RosyBrown","RoyalBlue","SaddleBrown","Salmon","SandyBrown","SeaGreen","SeaShell","Sienna","Silver","SkyBlue","SlateBlue","SlateGray","SlateGrey","Snow","SpringGreen","SteelBlue","Tan","Teal","Thistle","Tomato","Turquoise","Violet","Wheat","White","WhiteSmoke","Yellow","YellowGreen"]:"hexs"===e?["f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","000000","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"]:void 0}function re(e){return e.replace(/^\s+|\s+$/g,"")}function oe(e,t){"object"==typeof e&&(e.hasOwnProperty("y")&&(t=e.y),e.hasOwnProperty("x")&&(e=e.x)),this.x=e===void 0?0:e,this.y=t===void 0?0:t}function ie(e,t){oe.call(this,e,t)}function se(e,t,n,r){ie.call(this,e,t),"object"==typeof e&&(e.hasOwnProperty("w")&&(n=e.w),e.hasOwnProperty("h")&&(r=e.h)),this.w=n===void 0?0:n,this.h=r===void 0?0:r}function de(e,t){ie.call(this,e,t)}function le(e){return new ft(e)}function pe(e){null===wt&&("object"==typeof e?(vt=Object.keys(e)[0],wt=e[vt]):"string"==typeof e&&(wt=e))}function ce(e,t){for(let n in Ot)e=Ot[n](e,t);return e}function ue(e){if("string"==typeof e){this.url=e,this.params={};let t=e.split("?");if(this.path=t[0],1<t.length){let e=t[1].split("&");for(let t=0,n;t<e.length;t++)n=e[t].split("="),this.params[n[0]]=1<n.length?decodeURIComponent(n[1]):""}}else if(e instanceof ue)for(let t in this.url=e.url,this.path=e.path,this.params={},e.params)e.params.hasOwnProperty(t)&&(this.params[t]=e.params[t])}function ge(e){e=e.replace("\\","/");let t=null;if(!Pt.hasOwnProperty(e)){let n=e.split("/"),r=[],o,s,d;for(s=1;s<=n.length-1;s++){if(r.push("?"),d=r.join("/"),o=n.slice(s).join("/"),Pt.hasOwnProperty(d+"/"+o)){t=Pt[d+"/"+o];break}if(Pt.hasOwnProperty("??/"+o)){t=Pt["??/"+o];break}}for(r=[],s=n.length-1;1<=s;s--){if(r.push("?"),d=r.join("/"),o=n.slice(s).join("/"),Pt.hasOwnProperty(o+"/"+d)){t=Pt[o+"/"+d];break}if(Pt.hasOwnProperty(o+"/??")){t=Pt[o+"/??"];break}}}else t=Pt[e];return t}function he(e){this.route=e,this.params={},this.__={events:{},dispatchers:{}}}function me(e){Tt=e,Lt=It.hasOwnProperty(e)?It[e]:It.en,fe.triggerEvent("langChange",e)}function fe(e,t,n){return _e(Lt,e,t,n)}function _e(e,t,n,r){for(let o in void 0===r&&"object"==typeof n&&(r=n),e.hasOwnProperty(n)&&e[n].hasOwnProperty(t)?t=e[n][t]:fe.loadTranslations(n),r)r.hasOwnProperty(o)&&(t=t.replace("{"+o+"}",r[o]));return t}function ye(e,t){let n=new DataAjax({url:(At+"/"+e+".json").replace("//","/"),method:"GET"});n.fetch(function(n){fe.addTranslation(e,n),fe.triggerEvent("translations",e),"function"==typeof t&&t()})}function be(){return"1.0.0"}function ve(e){if("string"!=typeof this.url)return this.triggerEvent("error"),p("URL for the ajaxCollector is not a string ("+typeof this.url+" given)."),!1;let t=jt.hasOwnProperty(this.url)?jt[this.url]:this.url,n=this,r=new XMLHttpRequest;r.onprogress=t=>{t.lengthComputable&&this.triggerEvent("progress",Math.ceil(100*(t.loaded/t.total)))},r.onreadystatechange=function(t){if(4===this.readyState){if(0<=[302,303,307].indexOf(this.status)){let e=this.getResponseHeader("Location");(301===this.status||308===this.status)&&(""===e||null===e)&&(p("Invalid redirection url for \""+n.url+"\" (empty \"Location\" header)."),n.triggerErrorEvents(this.status)),jt[n.url]=e;let r=n.triggerRedirectionEvents(this.status,e);r.defaultPrevented&&t.preventDefault()}else if(200===this.status){try{let e=this.getResponseHeader("X-Redirect");if(null!==e){let t=n.triggerRedirectionEvents(this.status,e);t.defaultPrevented||window.location.replace(e)}}catch(t){}let t=this.getResponseHeader("content-type"),r;r="string"==typeof t&&0<=t.indexOf("json")?JSON.parse(this.responseText):this.responseText,n.cache=null===n.cacheLifetime||0<n.cacheLifetime?r:null,n.triggerEvent("dataReady",r),n.triggerEvent("complete",r),DataAjax.triggerEvent("complete",n),n.triggerEvent("progress",100),"function"==typeof e&&e(r,n)}else{n.hasError=!0;let e=new Event("error",{cancelable:!0});n.triggerEvent("error",this.status,e),Ht.triggerEvent("error",n,this.status,e),e=new Event("complete",{cancelable:!0}),n.triggerEvent("complete",this.status,e),Ht.triggerEvent("complete",n,this.status,e)}n.lastFetchTime=Date.now(),n.ready=!0}};let o=[];if(!(this._prameters instanceof FormData))for(let e in this._parameters)"object"==typeof this._parameters[e]?o.push(encodeURIComponent(e)+"="+encodeURIComponent(JSON.stringify(this._parameters[e]))):o.push(encodeURIComponent(e)+"="+encodeURIComponent(this._parameters[e]));for(let s in r.open(this.method,t+("GET"===this.method&&0<o.length?(0>t.indexOf("?")?"?":"&")+o.join("&"):""),!0),Ht.triggerEvent("send",n),n.triggerEvent("send"),n.headers)r.setRequestHeader(s,n.headers[s]);if(n.useCsrf&&null!==wt&&r.setRequestHeader(vt,wt),"POST"===this.method.toUpperCase()){if(this._parameters instanceof FormData)return n.useCsrf&&null!==wt&&this._parameters.append(vt,wt),r.send(this._parameters),!0;r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.useCsrf&&null!==wt&&o.push(vt+"="+wt),r.send(o.join("&"))}else r.send();return!0}function we(e){this.ws.send(this._parameters,t=>{e.call(this,t),this.triggerEvent("dataReady",this,t)})}function Oe(e){window.WebSocket||l("WebSocket is not supported by this browser.");let t=[Oe.FORMAT_JSON,Oe.FORMAT_TOKENIZED_JSON,Oe.FORMAT_RAW];this.format=e.hasOwnProperty("format")&&0<=t.indexOf(e.format)?e.format:Oe.FORMAT_TOKENIZED_JSON,this.url=e.url,this.authRequestMessage=e.authRequestMessage?e.authRequestMessage:null,this.authSuccessMessage=e.authSuccessMessage?e.authSuccessMessage:"authorized",this.authFailMessage=e.authFailMessage?e.authFailMessage:"authorization failed",this.conn=null,this.authorized=!1,this.reconnectionInterval=e.reconnectionInterval?e.reconnectionInterval:5e3,this.tokens={},this.__={events:{},dispatchers:{}}}function xe(e){let t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}function Pe(e){for(let t in this.token=xe(12)+Date.now(),e)e.hasOwnProperty(t)&&(this[t]=e[t])}function Ee(){return Ft}function Ce(e){this.id=e.id||null,this.role=e.role||null,this.firstName=e.firstName||"",this.secondName=e.secondName||"",this.email=e.email||"",this.phone=e.phone||"",this.photo=new ke(e.photo||{}),this.sign=e.sign||"",this.position=e.position||"",this.companyId=e.companyId||"",this.companyName=e.companyName||""}function ke(e){this.small=e.small||"",this.medium=e.medium||"",this.large=e.large||""}function Te(e){return Te.date(e)}function Ie(e,t){if(null===e||""===e)return"";0>e.indexOf(" ")&&(e+=" 01:00:00");let n=new Date(e),r=n.getFullYear(),o,s;"ru"===fe.getLanguage()?(o=Te.monthShortName(n.getMonth()).toLowerCase(),s=n.getDate()):(o=Te.monthShortName(n.getMonth()),s=Te.ordinal(n.getDate()));let l="";for(let n=0;n<t.length;n++)l+="Y"===t[n]?r:"m"===t[n]?o:"d"===t[n]?s:t[n];return l}function Ne(e){this.name=e,this.__={events:{},dispatchers:{},eventsTimeouts:{}}}function Le(e){if("string"!=typeof e&&Selection.logging)return p("EventsChannel name must be a string but "+typeof e+" given."),null;if(Gt.hasOwnProperty(e))return Gt[e];let t=new Ne(e);return Gt[e]=t,t}var Se=Math.max,Ae=Math.min,Be=Math.round,Re=Math.asin,He=Math.abs,je=Math.sqrt,De=Math.pow,Ue=Math.sin,Me=Math.cos,Fe=Math.PI;let Ge={regexp_id:/#\w+[_\-\w]*/ig,regexp_tagName:/@\w+[_\-\w]*/ig,regexp_class:/\.\w+[_\-\w\s\d]*/ig,regexp_attribute:/\[(\w+[_\-\w]*\s*=\s*[^;=]+[/_\-\w\d.\s]*(\s*;\s*)?)+\]/ig,regexp_property:/\((\w+[_\-\w]*\s*=\s*[^;=]+[/_\-\w\d.\s]*(\s*;\s*)?)+\)/ig,regexp_params:/\{(\w+[_\-\w]*\s*=\s*[^;=]+[#\(\),/_\-\w\d.\s]*(\s*;\s*)?)+\}/ig,regexp_childUI:/\|\s*\w*[_\-\w\s/]+[_\-\w\d\s]*/ig,regexp_include:/<<<\s*\w*[/_\-\w\s]+[/_\-\w\d\s]*/ig,devMode:!0,logging:!0};Ge.setParsingRule=function(e,t){if("string"==typeof e){if(!Ge.hasOwnProperty("regexp_"+e))throw new SettingsException("Rule \""+e+"\" is absent in the settings.");if(a.constructor!==RegExp)throw new SettingsException("Trying to assign "+typeof t+" as parsing regular expression for "+e+".");Ge["regexp_"+e]=t}else if("object"==typeof e)for(let n in e)if(Ge.hasOwnProperty("regexp_"+n)){if(a.constructor!==RegExp)throw new SettingsException("Trying to assign "+typeof t+" as parsing regular expression for "+e+".");e.hasOwnProperty(n)&&(Ge["regexp_"+n]=e[n])}else throw new SettingsException("Rule \""+n+"\" is absent in the settings.")},Ge.enableLogging=function(e){Ge.logging=!1!==e},n.prototype={log:function(){if(!Ge.logging)return;if(""===this.message)return;let e="UIBuilder >>>";this.hasOwnProperty("name")&&(e+=" "+this.name),e+=" "+this.message,this.hasOwnProperty("type")&&"exception"!==this.type?"warning"===this.type?console.warn(e):console.log(e):console.error(e)}},r.prototype=n.prototype,o.prototype=n.prototype,s.prototype=n.prototype;let ze=null;ze=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)?function(e){return e.unshift("font-weight: 900"),e.unshift("%c UI >"),e}:function(e){return e.unshift("UI >"),e};let We={},qe={add(e,t){We[e]=t},get(e){return We.hasOwnProperty(e)?We[e]:null},delete(e){delete We[e]}},Ye={},Ve={add(e,t){Ye[e]=t},get(e){let t=Ye.hasOwnProperty(e)?Ye[e]:null;if(null===t){let t=qe.get(e);return null===t?null:(Ye[e]=t.extend(),qe.delete(e),Ye[e])}return t},getAll(){return Ye},remove(e){delete Ye[e]}};class Xe{constructor(e){this.eventName=e,this.ports={}}onPort(e,t){if(this.ports.hasOwnProperty(e)&&delete this.ports[e],"function"!=typeof t)throw new EventException("Type of handler is not a function");this.ports[e]=t}runHandlers(e,t){for(let n in this.ports)this.ports.hasOwnProperty(n)&&this.ports[n].apply(e,t)}offPort(e){this.ports.hasOwnProperty(e)&&delete this.ports[e]}offAllPorts(){delete this.ports,this.ports={}}}class Qe{constructor(e,t){for(let n in void 0===t&&(t={}),this.name=e,this.params=t.params||{},this.__={events:{},eventsTimeouts:{},dispatchers:{}},t)t.hasOwnProperty(n)&&"function"==typeof t[n]&&2<n.length&&"on"===n.slice(0,2)?this.on(n.slice(2).toLowerCase(),t[n]):this.hasOwnProperty(n)||(this[n]=t[n])}applyTo(e,t){let n=new Je(e,this);for(let r in t)t.hasOwnProperty(r)&&n.params.hasOwnProperty(r)&&(n.params[r]=t[r]);return e.hasOwnProperty("__")&&e.__.hasOwnProperty("extensions")&&(e.__.extensions[this.name]=n),this.triggerEvent("apply",n,e,n.params),m.triggerEvent("apply",n),n}removeFrom(e){if(e.hasOwnProperty("__")&&e.__.hasOwnProperty("extensions")){let t=e.__.extensions[this.name];t instanceof Je&&(t.triggerEvent("remove"),this.triggerEvent("remove",t))}}}c(Qe.prototype);class Je{constructor(e,t){this.name=t.name,this.target=e,this.params=u(t.params),this.vars={}}update(e){let t=m(this.name);null!==t&&t.triggerEvent("update",this,e)}remove(){let e=m(this.name);null!==e&&e.triggerEvent("remove",this)}}c(Je.prototype);let Ke={};c(m),m.register=function(e,t){Ke.hasOwnProperty(e)&&p("Extension with name \""+e+"\" is already registered.");let n=new Qe(e,t);m.triggerEvent("register",n),Ke[e]=n};class Ze{constructor(e){let t="number"==typeof e?e:250;"object"!=typeof e&&(e={}),this.start=e.start||0,this.end=e.end||1,this.duration=e.duration||t,this.f=e.f||"easeOutQuad",this.callback=e.callback,this.stopped=!1}run(e){let r=performance.now(),o=this.duration,s=()=>{if(this.stopped)return;let d=performance.now(),t=d-r,n=t/this.duration,l=$e[this.f](n,t,0,1,this.duration);"function"==typeof e&&e(l),d<r+o?requestAnimationFrame(s):1!==l&&"function"==typeof e&&e(1,!0)};s()}stop(){this.stopped=!0}}let $e={default:"easeOutQuad",swing:function(e,n,t,r,o){return $e[$e.default](e,n,t,r,o)},easeInQuad:function(e,n,r,o,s){return o*(n/=s)*n+r},easeOutQuad:function(e,n,r,o,s){return-o*(n/=s)*(n-2)+r},easeInOutQuad:function(e,n,r,o,s){return 1>(n/=s/2)?o/2*n*n+r:-o/2*(--n*(n-2)-1)+r},easeInCubic:function(e,n,r,o,s){return o*(n/=s)*n*n+r},easeOutCubic:function(e,n,r,o,s){return o*((n=n/s-1)*n*n+1)+r},easeInOutCubic:function(e,n,r,o,s){return 1>(n/=s/2)?o/2*n*n*n+r:o/2*((n-=2)*n*n+2)+r},easeInQuart:function(e,n,r,o,s){return o*(n/=s)*n*n*n+r},easeOutQuart:function(e,n,r,o,s){return-o*((n=n/s-1)*n*n*n-1)+r},easeInOutQuart:function(e,n,r,o,s){return 1>(n/=s/2)?o/2*n*n*n*n+r:-o/2*((n-=2)*n*n*n-2)+r},easeInQuint:function(e,n,r,o,s){return o*(n/=s)*n*n*n*n+r},easeOutQuint:function(e,n,r,o,s){return o*((n=n/s-1)*n*n*n*n+1)+r},easeInOutQuint:function(e,n,r,o,s){return 1>(n/=s/2)?o/2*n*n*n*n*n+r:o/2*((n-=2)*n*n*n*n+2)+r},easeInSine:function(e,n,t,r,o){return-r*Me(n/o*(Fe/2))+r+t},easeOutSine:function(e,n,t,r,o){return r*Ue(n/o*(Fe/2))+t},easeInOutSine:function(e,n,t,r,o){return-r/2*(Me(Fe*n/o)-1)+t},easeInExpo:function(e,n,t,r,o){return 0===n?t:r*De(2,10*(n/o-1))+t},easeOutExpo:function(e,n,t,r,o){return n===o?t+r:r*(-De(2,-10*n/o)+1)+t},easeInOutExpo:function(e,n,r,o,s){return 0===n?r:n===s?r+o:1>(n/=s/2)?o/2*De(2,10*(n-1))+r:o/2*(-De(2,-10*--n)+2)+r},easeInCirc:function(e,n,r,o,s){return-o*(je(1-(n/=s)*n)-1)+r},easeOutCirc:function(e,n,r,o,s){return o*je(1-(n=n/s-1)*n)+r},easeInOutCirc:function(e,n,r,o,s){return 1>(n/=s/2)?-o/2*(je(1-n*n)-1)+r:o/2*(je(1-(n-=2)*n)+1)+r},easeInElastic:function(e,n,r,o,l){let d=1.70158,c=0,u=o;return 0===n?r:1===(n/=l)?r+o:(c||(c=.3*l),u<He(o)?(u=o,d=c/4):d=c/(2*Fe)*Re(o/u),-(u*De(2,10*(n-=1))*Ue((n*l-d)*(2*Fe)/c))+r)},easeOutElastic:function(e,n,r,o,l){let d=1.70158,c=0,u=o;return 0===n?r:1===(n/=l)?r+o:(c||(c=.3*l),u<He(o)?(u=o,d=c/4):d=c/(2*Fe)*Re(o/u),u*De(2,-10*n)*Ue((n*l-d)*(2*Fe)/c)+o+r)},easeInOutElastic:function(e,n,r,o,l){let d=1.70158,c=0,u=o;return 0===n?r:2==(n/=l/2)?r+o:(c||(c=l*(1.5*.3)),u<He(o)?(u=o,d=c/4):d=c/(2*Fe)*Re(o/u),1>n?-.5*(u*De(2,10*(n-=1))*Ue((n*l-d)*(2*Fe)/c))+r:.5*(u*De(2,-10*(n-=1))*Ue((n*l-d)*(2*Fe)/c))+o+r)},easeInBack:function(e,n,r,o,l,d){return void 0===d&&(d=1.70158),o*(n/=l)*n*((d+1)*n-d)+r},easeOutBack:function(e,n,r,o,l,d){return void 0===d&&(d=1.70158),o*((n=n/l-1)*n*((d+1)*n+d)+1)+r},easeInOutBack:function(e,n,r,o,l,d){return void 0===d&&(d=1.70158),1>(n/=l/2)?o/2*(n*n*(((d*=1.525)+1)*n-d))+r:o/2*((n-=2)*n*(((d*=1.525)+1)*n+d)+2)+r},easeInBounce:function(e,n,t,r,o){return r-$e.easeOutBounce(e,o-n,0,r,o)+t},easeOutBounce:function(e,n,r,o,s){return(n/=s)<1/2.75?o*(7.5625*n*n)+r:n<2/2.75?o*(7.5625*(n-=1.5/2.75)*n+.75)+r:n<2.5/2.75?o*(7.5625*(n-=2.25/2.75)*n+.9375)+r:o*(7.5625*(n-=2.625/2.75)*n+.984375)+r},easeInOutBounce:function(e,n,t,r,o){return n<o/2?.5*$e.easeInBounce(e,2*n,0,r,o)+t:.5*$e.easeOutBounce(e,2*n-o,0,r,o)+.5*r+t}};class f{constructor(e){if(void 0===e&&(e={}),this.__={events:{},dispatchers:{},eventsTimeouts:{}},this.hasError=!1,this.ready=!0,this.cache=null,this.cacheLifetime=null,this.allowMultiple=!0,e.hasOwnProperty("collector")){if("function"!=typeof e.collector)throw new UIDataException("Collector must be a function but "+typeof e.collector+" given.");this.collector=e.collector}else this.collector=_;let t=["fetch","complete","error","progress"];for(let n=0;n<t.length;n++)e.hasOwnProperty("on"+t[n])&&"function"==typeof e["on"+t[n]]&&this.on(t[n],e["on"+t[n]]);this.waitingLimit=e.hasOwnProperty("waitingTime")?parseInt(e.waitingTime):3e3,this.timeElapsed=0,this.lastFetchTime=Date.now(),this._parameters=e.hasOwnProperty("data")?e.data:e.hasOwnProperty("parameters")?e.parameters:{}}parameters(e){return void 0===e?this._parameters:(this._parameters=e,this)}params(e){return this.parameters(e)}fetch(e){return(this.hasError=!1,(this.allowMultiple||this.ready)&&"function"==typeof this.collector)?(this.triggerEvent("fetch"),this.ready=!1,this.collector(e)):("object"==typeof params&&(this.params=params),!1)}send(e){return this.fetch(e)}}c(f.prototype),c(f);class et{constructor(e){for(let t in Object.defineProperty(this,"__",{value:{},configurable:!1,enumerable:!1,writeable:!1}),this.__.name=void 0===e.name?null:e.name,this.__.child=void 0===e.child?null:e.child,this.__.childParams=e.parameters||{},this.__.class=void 0===e.class?null:e.class,this.__.id=void 0===e.id?null:e.id,this.__.tag=null!==e.tag&&void 0!==e.tag?e.tag.toLowerCase():"div",this.__.inclusion=null,""===this.__.tag&&(this.__.tag="div"),this.__.node=document.createElement(this.__.tag),this.__.parent=null,this.__.uiinstance=null,this.__.instance=null,this.__.node.instance=null,this.__.node.uiinstance=null,this.__.node.element=this,this.__.node.uielement=this,this.__.extensions={},this.__.draggable=!1,this.__.dragX=!1,this.__.dragY=!1,this.__.isDragging=!1,this.__.dragWithinParent=!1,this.__.dragBoundaries=!1,this.__.localization=null,this.__.translation=null,this.__.tabContainer=null,this.__.animation=null,this.__.fx=null,this.__.data=void 0===e.data?null:e.data,this.__.children=[],this.__.events={},e.attributes)e.attributes.hasOwnProperty(t)&&this.__.node.setAttribute(t,e.attributes[t]);for(let t in e.properties)e.properties.hasOwnProperty(t)&&(et.prototype.hasOwnProperty(t)&&"function"==typeof et.prototype[t]?et.prototype[t].call(this,e.properties[t]):this.__.node[t]=e.properties[t]);"string"==typeof this.__.class&&(this.__.node.className=this.__.class),"string"==typeof this.__.id&&(this.__.node.id=this.__.id)}}et.prototype.applyExtension=function(e,t){if(this.__.extensions.hasOwnProperty(e))return l("Extension with name \""+e+"\" is already applied to the element."),!1;let n=m(e);return null===n?(p("Extension with name \""+e+"\" is not registered yet."),!1):(this.__.extensions[e]=n.applyTo(this,t),!0)},et.prototype.extension=function(e){return this.__.extensions.hasOwnProperty(e)?this.__.extensions[e]:null},et.prototype.removeExtension=function(e){if(!this.__.extensions.hasOwnProperty(e))return!1;let t=this.__.extensions[e];return void 0!==t.remove&&(t.remove(),delete this.__.extensions[e],!0)},et.prototype.updateExtension=function(e,t){if(!this.__.extensions.hasOwnProperty(e))return!1;let n=this.__.extensions[e];return void 0!==n.update&&(n.update(t),!0)},et.prototype.applyLocalization=function(e,t){return this.__.node.setAttribute("localization",e),this.__.node.T=t,this},et.prototype.hasChildUI=function(){return null!==this.__.child},et.prototype.node=function(){return this.__.node},et.prototype.scrollTop=function(e){return void 0===e?this.__.node.scrollTop:(this.__.node.scrollTop=e,this)},et.prototype.scrollHeight=function(){return this.__.node.scrollHeight},et.prototype.setChildUI=function(e){return"string"==typeof e?this.__.child=e:void 0!==e.render&&(this.__.child=e.name),this},et.prototype.getChildUI=function(){return Ve.get(this.__.child)},et.prototype.hasInclusion=function(){return null!==this.__.inclusion&&1===this.__.children.length&&this.__.children[0].__!==void 0},et.prototype.findTopLocalParent=function(){let e=this;for(;e instanceof et&&!(null===e.__.parent);)if(e.__.parent instanceof et&&e.__.parent.__.instance===this.__.instance)e=e.__.parent;else break;return e===this?null:e},et.prototype.inclusion=function(){return this.__.inclusion},et.prototype.instance=function(){return this.__.instance},et.prototype.UII=function(){return this.__.instance},et.prototype.parent=function(){return this.__.parent},et.prototype.parentUII=function(){return null===this.instance()?null:this.UII().parentUII()},et.prototype.parentInstance=function(){return null===this.instance()?null:this.UII().parentUII()},et.prototype.children=function(){return this.__.children},et.prototype.getAllChildElements=function(){let e=this.__.node.childNodes,t=[];for(let n=0,r=e.length;n<r;n++)e[n].uielement instanceof et&&t.push(e[n].uielement);return t},et.prototype.getAllNearbyElements=function(){let e=this.__.node.parentNode.childNodes,t=[];for(let n=0,r=e.length;n<r;n++)e[n].element instanceof et&&e[n].element!==this&&t.push(e[n].element);return t};let tt=["submit","abort","beforeinput","blur","click","compositionen","paste","compositionstart","compositionupdate","dblclick","error","focus","change","focusin","focusout","input","keydown","keypress","keyup","load","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mousewheel","mouseup","resize","scroll","select","unload","wheel","touchstart","touchend","touchmove"];et.prototype.addEventListener=function(e,t){return(e=e.toLowerCase(),"function"!=typeof t)?void p("Invalid callback type given for the event \""+e+"\"."):("on"===e.slice(0,2)&&(e=e.slice(2)),this.__.events.hasOwnProperty(e)||(this.__.events[e]=[]),0<=this.__.events[e].indexOf(t))?(l("Handler for the event \""+e+"\" already added."),this):(this.__.events[e].push(t),0<=tt.indexOf(e)&&this.__.node.addEventListener(e,b),this)},et.prototype.on=et.prototype.addEventListener,et.prototype.removeEventListener=function(e,t){if(e=e.toLowerCase(),"on"===e.slice(0,2)&&(e=e.slice(2)),!this.__.events.hasOwnProperty(e))return this;let n=this.__.events[e].indexOf(t);return 0>n?this:(this.__.events[e].splice(n,1),this)},et.prototype.removeAllEventListeners=function(e){return("on"===e.slice(0,2)&&(e=e.slice(2)),!this.__.events.hasOwnProperty(e))?this:(this.__.events[e]=null,delete this.__.events[e],this.__.node.removeEventListener(e,b),this)},et.prototype.off=function(e,t){return e=e.toLowerCase(),void 0===t?this.removeAllEventListeners(e):this.removeEventListener(e,t),this},et.prototype.triggerEvent=function(e){e=e.toLowerCase();let t=[],n;for(n=1;n<arguments.length;n++)t.push(arguments[n]);if("on"===e.slice(0,2)&&(e=e.slice(2)),!this.__.events.hasOwnProperty(e))return this;let r=this.__.events[e];for(n=0;n<r.length;n++)r[n].apply(this,t)},et.prototype.removeChildren=function(){for(let e=0,t=this.__.children.length;e<t;e++)this.__.children[0].remove();return this.__.children=[],this},et.prototype.remove=function(){null===this.__.node.parentNode||(this.__.node.parentNode.removeChild(this.__.node),delete this.__.node.uiinstance[this.__.name])},et.prototype.addOne=function(e,t){if("object"!=typeof t&&(t="object"==typeof e?e:this.__.childParams),e=!0===e,null===this.__.child)return null;let n=Ve.get(this.__.child);return null===n?null:this.add(n,e,t)},et.prototype.addOneAfter=function(e,t){if("object"!=typeof t&&(t={}),void 0===e.isImplementationOf)return p("Invalid parameter given for the element method \"addOneAfter()\" - instance is required but "+typeof e+" given.");if(null===this.__.child)return null;let n=Ve.get(this.__.child);return null===n?null:this.addAfter(n,e,t)},et.prototype.addOneBefore=function(e,t){if("object"!=typeof t&&(t={}),void 0===e.isImplementationOf)return p("Invalid parameter given for the element method \"addOneBefore()\" - instance is required but "+typeof e+" given.");if(null===this.__.child)return null;let n=Ve.get(this.__.child);return null===n?null:this.addBefore(n,e,t)},et.prototype.add=function(e,t,n){(void 0===t||null===t)&&(t=!1),"string"==typeof e&&(e=Ve.get(e),null===e&&p("UI with name "+e+" is absent.")),void 0===e.renderTo&&p("First argument of the add() method must be UI or string");let r=e.renderTo(this,t,n);return this.triggerEvent("add",r),r.__.parent=this,r},et.prototype.addAfter=function(e,t,n){if(void 0===t.isImplementationOf)return p("First argument for the method \"addAfter()\" is not instance."),null;if("string"==typeof e&&(e=_uibuilder(e),null===e))throw new InvalidParamException("UI with name "+e+" is absent.");if(void 0===e.prepare)throw new InvalidParamException("First argument of the addAfter() method must be UI or string");let r=e.prepare(n),o=new Event("beforeAdd",{cancelable:!0});if(this.triggerEvent("beforeAdd",r,o),o.defaultPrevented)return null;let s=t.getLastRootElement();r.appendAfter(s),r.__.parent=this;let d=s.parent();if(d.hasChildUI()){let e=d.__.children;if(1>=e.length)d.__.children.push(r);else for(let n=0;n<e.length;n++)if(e[n]===t){d.__.children.splice(n,0,r);break}}return r.triggerEvent("render",n),e.triggerEvent("render",r,n),this.triggerEvent("add",r),r},et.prototype.addBefore=function(e,t,n){if(void 0===t.isImplementationOf)return p("First argument for the method \"addAfter()\" is not instance."),null;if("string"==typeof e&&(e=_uibuilder(e),null===e))throw new InvalidParamException("UI with name "+e+" is absent.");if(void 0===e.prepare)throw new InvalidParamException("First argument of the addAfter() method must be UI or string");let r=e.prepare(n),o=new Event("beforeAdd",{cancelable:!0});if(this.triggerEvent("beforeAdd",r,o),o.defaultPrevented)return null;let s=t.getFirstRootElement();r.appendBefore(s),r.__.parent=this;let d=s.parent();if(d.hasChildUI()){let e=d.__.children;if(1>=e.length)d.__.children.unshift(r);else for(let n=0;n<e.length;n++)if(e[n]===t){0==n?d.__.children.unshift(r):d.__.children.splice(n-1,0,r);break}}return r.triggerEvent("render",n),e.triggerEvent("render",r,n),this.triggerEvent("add",r),r},et.prototype.html=function(e){return void 0===e?this.__.node.innerHTML:(this.__.node.innerHTML=e,this)},et.prototype.text=function(e){return void 0===e?this.__.node.textContent:(this.__.node.textContent=e,this)},et.prototype.attr=function(e,t){return void 0===t?this.__.node.hasAttribute(e)?this.__.node.getAttribute(e):"":(this.__.node.setAttribute(e,t),this)},et.prototype.hasAttr=function(e){return this.__.node.hasAttribute(e)},et.prototype.removeAttr=function(e){return this.__.node.removeAttribute(e)},et.prototype.prop=function(e,t){return void 0===t?this.__.node[e]:(this.__.node[e]=t,this)},et.prototype.val=function(e){return void 0===e?this.__.node.value:(this.__.node.value=e,this)},et.prototype.src=function(e){return("IMG"!==this.__.node.tagName&&l("Calling [src()] method not on the image tag."),void 0===e)?this.__.node.src:(this.__.node.src=e,this)},et.prototype.href=function(e){return void 0===e?this.__.node.href:(this.__.node.href=e,this)},et.prototype.getContext=function(e){return void 0===e?this.__.node.getContext("2d"):this.__.node.getContext(e)},et.prototype.width=function(e){return void 0===e?this.__.node.width:(this.__.node.width=e,this)},et.prototype.height=function(e){return void 0===e?this.__.node.height:(this.__.node.height=e,this)},et.prototype.outerWidth=function(){return this.__.node.offsetWidth},et.prototype.outerHeight=function(){return this.__.node.offsetHeight},et.prototype.hide=function(){return"none"===this.__.node.style.display?this:(this.__.node.oldDisplay=this.__.node.style.display,this.__.node.style.display="none",this)},et.prototype.show=function(e){return"string"==typeof e?(this.__.node.style.display=e,this):"none"!==this.__.node.style.display&&null!==this.__.node.offsetParent?this:(this.__.node.style.display=this.__.node.hasOwnProperty("oldDisplay")&&"none"!==this.__.node.oldDisplay?this.__.node.oldDisplay:"flex",this)},et.prototype.isHidden=function(){let e=this.computedStyle();return"none"===e.display},et.prototype.isVisible=function(){let e=this.computedStyle();return"none"!==e.display&&"hidden"!==e.visibility},et.prototype.contentHeight=function(){let e=this.__.node,t=e.style.cssText.match(/height\s*:\s*[\d\w%]+/i);t=null===t?"":t[0],e.style.height="auto";let n=parseInt(window.getComputedStyle(e).getPropertyValue("height").replace(/[^.\d]/i,""));return e.style.cssText=e.style.cssText.replace(/height\s*:\s*auto/i,t),n},et.prototype.slideDown=function(e,t){return"number"!=typeof e&&(e=250),this.isHidden()&&this.css({height:0}),this.css({overflow:"hidden",display:"flex"}),this.animate({height:this.contentHeight()},e,function(){this.css({height:"auto"}),"function"==typeof t&&t.call(this)}),this.__.fx="slideDown",this},et.prototype.slideUp=function(e,t){return 0===this.outerHeight()||this.isHidden()?this:("number"!=typeof e&&(e=250),this.animate({height:0},e,t),this.__.fx="slideUp",this)},et.prototype.slideToggle=function(e,t){return"number"!=typeof e&&(e=250),0===this.node().clientHeight||this.isHidden()||"slideUp"===this.__.fx?this.slideDown(e,t):this.slideUp(e,t),this},et.prototype.hasClass=function(e){return this.__.node.classList.contains(e)},et.prototype.hasClasses=function(e){for(let t=0;t<e.length;t++)if(!this.__.node.classList.contains(e[t]))return!1;return!0},et.prototype.addClass=function(e){if("string"==typeof e)this.__.node.classList.add(e);else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.__.node.classList.add(e[t]);else return this;return this.__.class=this.__.node.className,this},et.prototype.removeClass=function(e){if("string"==typeof e)this.__.node.classList.remove(e);else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.__.node.classList.remove(e[t]);else return this;return this.__.class=this.__.node.className,this},et.prototype.toggleClass=function(e){return this.__.node.classList.toggle(e),this.__.class=this.__.node.className,this},et.prototype.css=function(e){if("string"==typeof e){let t=this.computedStyle(),n=t.hasOwnProperty(e)?t[e]:null;return null!==n&&0<=n.indexOf("px")&&(n=parseFloat(n.replace("px",""))),n}if("object"==typeof e)for(let t in e)e.hasOwnProperty(t)&&(this.__.node.style[t]=e[t]);return this},et.prototype.clientRect=function(){return this.__.node.getBoundingClientRect()},et.prototype.tagName=function(){return this.__.node.tagName},et.prototype.computedStyle=function(){return getComputedStyle(this.__.node)},et.prototype.fadeIn=function(e,t,n){return("string"==typeof e&&void 0===t?t=e:"function"==typeof e&&void 0===n?n=e:"function"==typeof t&&null==n&&(n=t),"number"!=typeof e&&(e=250),this.isVisible()&&1===this.css("opacity"))?this:(void 0!==t&&this.css({display:t}),this.animate({opacity:1},e,n),this.__.fx="fadeIn",this)},et.prototype.fadeOut=function(e,t,n){if(this.isHidden()||0===this.css("opacity"))return this;"function"==typeof e&&void 0===n?n=e:"function"==typeof t&&void 0==n&&(n=t),"number"!=typeof e&&(e=250),void 0===t&&(t=!0),this.animate({opacity:0},e,n),this.__.fx="fadeOut";let r=this;return t&&setTimeout(function(){r.css({display:"none"})},e),this},et.prototype.fadeToggle=function(e,t,n){return this.isHidden()||0===this.css("opacity")||"fadeOut"===this.__.fx?this.fadeIn(e,t,n):this.fadeOut(e,!0===t,n),this},et.prototype.animate=function(e,t,n){let r=this,o={},s=e,d={},l=this.computedStyle();for(let r in s)d[r]=l[r].replace(/[-\d.]/g,""),o[r]=parseFloat(l[r].toString().replace(/[^-\d.]/gi,"")),("width"==r||"maxWidth"==r||"minWidth"==r)&&0<(s[r]+"").indexOf("%")?(d[r]="%",o[r]=100*(o[r]/this.__.node.parentNode.offsetWidth)):("height"==r||"maxHeight"==r||"minHeight"==r)&&0<(s[r]+"").indexOf("%")&&(d[r]="%",o[r]=100*(o[r]/this.__.node.parentNode.offsetHeight)),s[r]=parseFloat(s[r].toString().replace(/[^-\d.]/gi,""));this.stopAnimation();let p=new Ze({duration:t,f:"easeInOutQuad"});return this.__.animation=p,this.__.animation.run(function(e,t){if(r.__.animation!==p||r.__.animation.stopped)return;let l={},c;for(let n in s){c=s[n]-o[n],0===c||(l[n]=parseFloat((c*e).toFixed(5))+o[n]+d[n])}r.css(l),t&&("function"==typeof n&&n.call(r),r.stopAnimation())}),this},et.prototype.stopAnimation=function(){return null!==this.__.animation&&this.__.animation.stop(),this.__.animation=null,this.__.fx=null,this},et.prototype.load=function(e,t,n){if("boolean"!=typeof t&&(t=!0),"boolean"!=typeof n&&(n=!1),e instanceof f)return e.fetch(function(e,t,n){this.load(n,e,t)}.bind(this,t,n));else{let n=!0;if(null!==this.inclusion())n=!1;else if("object"==typeof e&&!Array.isArray(e))for(let t in n=!1,e)if(e.hasOwnProperty(t)&&!et.prototype.hasOwnProperty(t)&&null!==Ve.get(t)){n=!0;break}!0===t&&n&&(this.removeChildren(),this.html(""))}let r=new Event("load",{cancelable:!0});if(this.triggerEvent("load",e,r),r.defaultPrevented)return this;if("string"==typeof e||"number"==typeof e){let t=this.tagName();"IMG"===t||"VIDEO"===t||"IFRAME"===t?this.src(e):"INPUT"===t||"SELECT"===t?this.val(e):this.text(e)}else if("object"==typeof e){if(null!==this.inclusion())return this.inclusion().load(e,t,n),this;if(Array.isArray(e)){if(null===this.__.child)return l("Trying to load children for Element \""+this.__.name+" @ "+this.__.uiinstance.__.ui.name+"\" without child UI."),this;let r;for(let o=0;o<e.length;o++)try{r=this.addOne(n),r.load(e[o],t,n)}catch(e){throw e}}else for(let r in e)if(e.hasOwnProperty(r))if("children"==r&&Array.isArray(e[r])&&this.hasChildUI())this.load(e[r],t,n);else if(et.prototype.hasOwnProperty(r)&&"function"==typeof et.prototype[r])et.prototype[r].call(this,e[r]);else if(this.hasOwnProperty(r)&&this[r]instanceof et)null===this[r].inclusion()?this[r].load(e[r]):this[r].inclusion().load(e[r]);else{let o=Ve.get(r);null!==o&&o.renderTo(this).load(e[r],t,n)}}else l("Trying to load unsupported data type ("+typeof e+") to tye element. Only string or object can be used.");return this.triggerEvent("afterLoad",e),this},et.prototype.resetValues=function(){},et.prototype.gatherData=function(e){void 0===e&&(e=!0);let t=w(),n=new Event("gather");if(this.triggerEvent("gather",t,n),n.defaultPrevented||O(this,t,t,null,!0),void 0===t.value()){let e={};for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);t=e}else t=t.value();return e&&"object"==typeof t&&v(t),t},et.prototype.clone=function(){let e=new et({});g(this,e),g(this.__,e.__);let t=this.node(),n=t.cloneNode(!0);return n.uielement=e,e.__.node=n,e},et.prototype.isTab=function(){return null!==this.__.tabContainer},et.prototype.makeTabFor=function(e){this.__.tabContainer=e,e.hide();let t=this.getAllNearbyElements();this.on("click",C);for(let n=0,r=t.length;n<r;n++)if(t[n].isTab())return this;return this.addClass("active"),e.addClass("active").css({display:"flex",opacity:1}),this},et.prototype.tabContainer=function(){return this.__.tabContainer},c(S.prototype),S.prototype.isImplementationOf=function(e){return 0<=this.__.ui.__.implements.indexOf(e)},S.prototype.remove=function(){let e=this.__.parent,t=this.__.ui.scheme;for(let e in t)t.hasOwnProperty(e)&&null!==this[e].__.node.parentNode&&this[e].__.node.parentNode.removeChild(this[e].__.node);if(!0==e instanceof et)for(let t=0,n=e.__.children.length;t<n;t++)if(e.__.children[t]===this){e.__.children.splice(t,1);break}},S.prototype.ui=function(){return this.__.ui},S.prototype.UI=function(){return this.__.ui},S.prototype.loadLocalization=function(e){let t=this.__.ui.localization;null===t?l("Localization loading failed: localization category is not specified for the UI \""+this.__.ui.name+"\"."):L10n.loadTranslations(t,e)},S.prototype.params=function(){return this.__.params},S.prototype.parentUII=function(){let e=this.__.parent;return e instanceof et?e.__.uiinstance:null},S.prototype.load=function(e,t,n){if("boolean"!=typeof t&&(t=!0),"boolean"!=typeof n&&(n=!1),e instanceof f){try{e.fetch(function(t,n,r){this.load(r,t,n),this.triggerEvent("afterLoad",e),this.__.ui.triggerEvent("afterLoad",this,e)}.bind(this,t,n))}catch(t){p(t)}return this}let r=new Event("load",{cancelable:!0});if(this.__.ui.triggerEvent("load",this,e,r),r.defaultPrevented)return this.triggerEvent("afterLoad",e),this.__.ui.triggerEvent("afterLoad",this,e),this;if(r=new Event("load",{cancelable:!0}),this.triggerEvent("load",e,r),r.defaultPrevented)return this.triggerEvent("afterLoad",e),this.__.ui.triggerEvent("afterLoad",this,e),this;let o=this.getRootElement();if("string"==typeof e&&null!==o)return o.load(e,t,n),this.triggerEvent("afterLoad",e),this.__.ui.triggerEvent("afterLoad",this,e),this;if(Array.isArray(e)&&null!==o)return o.load(e,t,n),this.triggerEvent("afterLoad",e),this.__.ui.triggerEvent("afterLoad",this,e),this;for(let r in e)if("__"!=r)if(this.hasOwnProperty(r)){let o=this[r];if(this[r]instanceof et){let s=o.inclusion();if(!(s instanceof S))try{this[r].load(e[r],t,n)}catch(t){p(t)}else if(Array.isArray(e[r])){let d=s.getRootElement();if(null===d||!o.hasChildUI())s.load(e[r],t,n);else try{d.load(e[r],t,n)}catch(t){p(t)}}else s.load(e[r],t,n)}else o.load(e[r],t,n)}else{let t=Ve.get(r);null!==t&&null!==o&&t.renderTo(o,!1,{}).load(e[r],!0,!1)}return this.triggerEvent("afterLoad",e),this.__.ui.triggerEvent("afterLoad",this,e),this},S.prototype.getRootElement=function(){let e=Object.keys(this.__.ui.scheme);return 1===e.length&&this.hasOwnProperty(e[0])?this[e[0]]:null},S.prototype.getLastRootElement=function(){let e=Object.keys(this.__.ui.scheme),t=e[e.length-1];return 1===e.length&&this.hasOwnProperty(t)?this[t]:null},S.prototype.appendTo=function(e){let t=e instanceof et?e.node():e;if(void 0===t.appendChild)return void p("Invalid argument given for the instance \"appendAfter()\" method: "+typeof e+" given but node or element is required.");let n=this.UI().scheme;for(let r in n)n.hasOwnProperty(r)&&this.hasOwnProperty(r)&&(t.appendChild(this[r].node()),t.element instanceof et&&(this[r].__.parent=t.element))},S.prototype.appendAfter=function(e){let t=e instanceof et?e.node():e;if(void 0===t.appendChild)return void p("Invalid argument given for the instance \"appendAfter()\" method: "+typeof e+" given but node or element is required.");let n=t.parentNode;if(null===n)return void p("Element given for the method instance \"appendAfter()\" have no parent node.");let r=this.UI().scheme,o=t.nextSibling;if(o)for(let e in r)r.hasOwnProperty(e)&&this.hasOwnProperty(e)&&(n.insertBefore(this[e].node(),o),n.element instanceof et&&(this[e].__.parent=n.element));else for(let e in r)r.hasOwnProperty(e)&&this.hasOwnProperty(e)&&(n.appendChild(this[e].node()),n.element instanceof et&&(this[e].__.parent=n.element))},S.prototype.appendBefore=function(e){let t=e instanceof et?e.node():e;if(void 0===t.appendChild)return void p("Invalid argument given for the instance \"appendAfter()\" instance method: "+typeof e+" given but node or element is required.");let n=t.parentNode;if(null===n)return void p("Element given for the method instance \"appendAfter()\" have no parent node.");let r=this.UI().scheme;for(let o in r)r.hasOwnProperty(o)&&this.hasOwnProperty(o)&&(n.insertBefore(this[o].node(),t),n.element instanceof et&&(this[o].__.parent=n.element))},S.prototype.applyExtension=function(e,t){if(this.__.extensions.hasOwnProperty(e))return l("Extension with name \""+e+"\" is already applied to the instance."),!1;let n=m(e);return null===n?(p("Extension with name \""+e+"\" is not registered yet."),!1):(this.__.extensions[e]=n.applyTo(this,t),!0)},S.prototype.extension=function(e){return this.__.extensions.hasOwnProperty(e)?this.__.extensions[e]:null},S.prototype.removeExtension=function(e){if(!this.__.extensions.hasOwnProperty(e))return!1;let t=this.__.extensions[e];return void 0!==t.remove&&(t.remove(),delete this.__.extensions[e],!0)},S.prototype.updateExtension=function(e,t){if(!this.__.extensions.hasOwnProperty(e))return!1;let n=this.__.extensions[e];return void 0!==n.update&&(n.update(t),!0)};let nt={generateUIStyles(e){return A.call(e,e.css)},generateSimpleStyles(e){let n="\n";for(let r in e)if(e.hasOwnProperty(r)){if("object"!=typeof e[r])continue;for(let o in n+=r+" {\n",e[r])if(e[r].hasOwnProperty(o)){let s=e[r][o];void 0!==s.getValue&&(s=s.getValue()),n+="    "+t(""+o)+": "+s+";\n"}n+="}\n"}return n}};class at{constructor(e,t){this.name=e,this.methods={},this.methodsQuantity=0;for(let n=0,r=t.length,o;n<r;n++)o=new ot(t[n]),o.valid&&(this.methods[o.name]=o,this.methodsQuantity++)}implementedBy(e){for(let t in this.methods)if(this.methods.hasOwnProperty(t)&&("function"!=typeof e[t]||!this.methods[t].checkSignature(e[t])))return!1;return!0}toString(){let e=this.name+" {\n";for(let t in this.methods)this.methods.hasOwnProperty(t)&&(e+="    "+t+"("+this.methods[t].arguments.join(", ")+")\n");return e+"}"}}let rt=/^([\w$_]+[$\w\d]*)\s*\(([\w\d\s,$]*)\)/i;class ot{constructor(e){this.valid=!0;let t=(e+"").match(rt);if(null===t||2>t.length)return p("Invalid method signature."),void(this.valid=!1);if(this.name=t[1],2<t.length){this.arguments=t[2].split(",");for(let e=0,t=this.arguments.length;e<t;e++)this.arguments[e]=this.arguments[e].trim(),""===this.arguments[e]&&this.arguments.splice(e,1)}}checkSignature(e){let t=(e+"").match(rt);if(null===t||2>t.length)return!1;if(0<this.arguments.length){if(3>t.length)return!1;let e=t[2].split(",");if(""===t[2]||this.arguments.length>e.length)return!1}return!0}}let it={},st={};c(B),B.getImplementation=function(e){return st.hasOwnProperty(e)&&0<st[e].length?st[e][0]:null},B.addImplementation=function(e,t){st.hasOwnProperty(e)||(st[e]=[]),0>st[e].indexOf(t)&&st[e].push(t)},B.register=function(e,t){return e=e.trim(),"string"!=typeof e||""===e?void p("Interface name is invalid."):Array.isArray(t)&&0!==t.length?it.hasOwnProperty(e)?void l("Interface with name \""+e+"\" is already registered."):void(it[e]=new at(e,t),Ge.devMode&&B.triggerEvent("register",it[e])):void p("Interface method must contain at least one method signature.")},B.detectInterfacesFor=function(e){let t=[];for(let n in it)it.hasOwnProperty(n)&&it[n].implementedBy(e)&&t.push(it[n].name);return t};let dt=Ve.getAll();B.on("register",e=>{let t=[];for(let n in dt)dt.hasOwnProperty(n)&&e.implementedBy(dt[n].uiiConstructor.prototype)&&(dt[n].__.implements.push(e.name),t.push(dt[n]));st[e.name]=t});class lt{constructor(e,t,n){this.extendingUI=e,this.extendedUIName=t,this.options=n}extend(){let e=Ve.get(this.extendedUIName);if(null===e)throw new UIRegistrationException("UI which be extended is not found.");let t=this.extendingUI,n=this.options;for(let r in n.hasOwnProperty("scheme")||(n.scheme={}),n.hasOwnProperty("rules")||(n.rules={}),n.hasOwnProperty("styles")||(n.styles={}),n.hasOwnProperty("translations")||(n.translations={}),n.hasOwnProperty("params")||(n.params={}),t.uiiConstructor=e.uiiConstructor,t.elements={},t.scheme=h(n.scheme,u(e.scheme)),t.rules=h(n.rules,u(e.rules)),t.translations=h(n.translations,u(e.translations)),t.css=h(n.styles,u(e.css)),t.params=h(n.params,u(e.params)),t.localization=n.hasOwnProperty("localization")?n.localization:e.localization,t.cssLoaded=!1,t.__.events=u(e.__.events),t.__.styleNode=null,t.__.data=n.hasOwnProperty("data")?n.data:null,t.__.url=null,t.uiiConstructor=n.hasOwnProperty("methods")?function(){function r(e){S.call(this,e)}for(let t in r.prototype=Object.create(e.uiiConstructor.prototype),r.prototype.constructor=S,n.methods)n.methods.hasOwnProperty(t)&&"function"==typeof n.methods[t]&&!S.prototype.hasOwnProperty(t)&&(r.prototype[t]=n.methods[t]);return t.__.implements=B.detectInterfacesFor(n.methods),r}():e.uiiConstructor,n.hasOwnProperty("parameters")?t.__.params=h(n.parameters,u(e.__.params)):n.hasOwnProperty("params")&&(t.__.params=h(n.params,u(e.__.params))),k(t.scheme,t.elements),t.elements)t.elements.hasOwnProperty(r)&&t.rules.hasOwnProperty(r)&&""===t.elements[r].rules&&(t.elements[r].rules=t.rules[r]);for(let e in n)n.hasOwnProperty(e)&&"on"===e.slice(0,2)&&"function"==typeof n[e]&&t.addEventListener(e.slice(2),n[e]);return t}}class pt{constructor(e){if("object"!=typeof e&&(e={}),this.namespace="",this.elements={},this.scheme=e.hasOwnProperty("scheme")?e.scheme:{},this.rules=e.hasOwnProperty("rules")?e.rules:{},this.prefix=e.hasOwnProperty("prefix")?e.prefix:"",this.name=e.hasOwnProperty("name")?e.name:"",this.css=e.hasOwnProperty("css")?e.css:null,this.dependencies={},this.localization=e.hasOwnProperty("localization")?e.localization:null,this.translations=e.hasOwnProperty("translations")?e.translations:{},this.css=e.css||e.styles||{},this.cssLoaded=!1,"object"!=typeof this.scheme)throw new o("Scheme must be an object. "+typeof this.scheme+" given.");if(this.__={},this.__.dispatchers={},this.__.events={},this.__.eventsTimeouts={},this.__.implements=[],this.__.styleNode=null,this.__.data=e.hasOwnProperty("data")?e.data:null,this.__.url=null,this.__.params=e.params||e.parameters||{},e.hasOwnProperty("methods")){this.__.implements=B.detectInterfacesFor(e.methods);for(let e=0;e<this.__.implements.length;e++)B.addImplementation(this.__.implements[e],this);this.uiiConstructor=function(){function t(e){S.call(this,e)}for(let n in t.prototype=Object.create(S.prototype),t.prototype.constructor=S,e.methods)e.methods.hasOwnProperty(n)&&("function"!=typeof e.methods[n]||S.prototype.hasOwnProperty(n)||(t.prototype[n]=e.methods[n]));return t}()}else this.uiiConstructor=S;if(k(this.scheme,this.elements),e.hasOwnProperty("dependencies")){let t=e.dependencies;for(let e in t)if(this.elements.hasOwnProperty(e))if(Array.isArray(t[e]))this.dependencies[e]=t[e];else if("string"==typeof t[e]){let n=t[e].split(",");for(let e=0,t=n.length;e<t;e++)n[e]=n[e].trim();this.dependencies[e]=n}}for(let t in this.elements)this.elements.hasOwnProperty(t)&&this.rules.hasOwnProperty(t)&&""===this.elements[t].rules&&(this.elements[t].rules=this.rules[t]);for(let t in e)e.hasOwnProperty(t)&&"on"===t.slice(0,2)&&"function"==typeof e[t]&&this.addEventListener(t.slice(2),e[t])}removeFrom(e){"string"==typeof e&&(e=document.querySelector(e)),e instanceof et&&(e=e.node());let t=e.childNodes;for(let n=0;n<t.length;n++)if(t[n].instance instanceof S&&t[n].instance.UI()===this){let e=new Event("remove",{cancelable:!0});t[n].instance.triggerEvent("remove",e),e.defaultPrevented||t[n].instance.remove()}}isImplementationOf(e){return 0<=this.__.implements.indexOf(e)}getRootElement(){let e=Object.keys(this.scheme);return 1===e.length?this.elements[e[0]]:null}prepare(e){e=u(e);let t=new this.uiiConstructor;t.__.ui=this;let n={container:null,atStart:!1,params:e,localization:this.localization,translations:Object.assign({},this.translations)};this.triggerEvent("prepare",t,n),e=n.params,t.__.localization=n.localization,t.__.translations=n.translations;try{I(t,this,this.scheme,null)}catch(t){p(t)}for(let t in"object"!=typeof e&&(e={}),e)e.hasOwnProperty(t)&&(e[t]=N(e[t]));for(let t in this.__.params)this.__.params.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=this.__.params[t]);t.__.params=e;let r=new Event("create",{cancelable:!0});return this.triggerEvent("create",t,e,r),t}renderTo(e,t,n){"object"==typeof t&&"object"!=typeof n&&(n=t);let r=this.prepare(n);n=r.__.params;let o={container:e,atStart:t,params:r.__.params,localization:this.localization,translations:Object.assign({},this.translations)};this.triggerEvent("beforeRender",o),e=o.container,t=o.atStart,r.__.localization=o.localization,r.__.translations=o.translations;let s=e;e instanceof et?(r.__.parent=e,e.__.children.push(r),s=e.node()):"string"==typeof e&&(s=document.querySelector(e)),this.cssLoaded||null===this.css||this.createStyles(),t=!0===t;let d=this.scheme;for(let o in d)d.hasOwnProperty(o)&&(t&&0!==s.childNodes.length?s.insertBefore(r[o].node(),s.childNodes[0]):s.appendChild(r[o].node()),e instanceof et&&(r[o].__.parent=e));for(let r in"object"!=typeof n&&(n={}),n)n.hasOwnProperty(r)&&(n[r]=N(n[r]));for(let r in this.__.params)!n.hasOwnProperty(r)&&this.__.params.hasOwnProperty(r)&&(n[r]=this.__.params[r]);return this.triggerEvent("render",r,n),r}render(e){return this.renderTo("body",e)}createStyles(){this.cssLoaded=!0;let e=nt.generateUIStyles(this);if(""===e)return;let t=document.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("data-ui",this.name),n.ui=this,n.innerHTML=e,t.appendChild(n)}}c(pt.prototype),pt.prototype.extends=function(e,t){let n=new lt(this,e,t);Ve.remove(this.name),qe.add(this.name,n)};let ct={};c(H),H.register=function(e){"string"==typeof e&&(e={name:e}),L(e);let t=new pt(e);return Ve.add(e.name,t),H.triggerEvent("register",t),t},H.isInstance=function(e){return e instanceof S},H.isElement=function(e){return e instanceof et},H.createResetStyles=R;let ut={},gt=null,ht=null;c(D),D.register=function(e){return L(e),null!==Ve.get(e.name)&&p("UI with name \""+e.name+"\" already registered."),ut[e.name]=new pt(e),D.triggerEvent("register",ut[e.name]),ut[e.name]},D.render=function(e,t){let n=j(e);return null===n&&p("Layout with name \""+e+"\" is not registered yet."),ht=n.render(t),gt=e,ht},D.getInstance=function(){return ht};class mt{constructor(e){this.name=e}render(e){let t=j(this.name);return ht=t.render(e),gt=this.name,ht}}U.prototype={toRgbString:function(){return"rgb("+this.red+", "+this.green+", "+this.blue+")"},toRgbaString:function(e){return void 0===e&&(e=this.opacity),"rgba("+this.red+", "+this.green+", "+this.blue+", "+e+")"},toHwbString:function(){return"hwb("+this.hue+", "+Be(100*this.whiteness)+"%, "+Be(100*this.blackness)+"%)"},toHwbStringDecimal:function(){return"hwb("+this.hue+", "+this.whiteness+", "+this.blackness+")"},toHwbaString:function(){return"hwba("+this.hue+", "+Be(100*this.whiteness)+"%, "+Be(100*this.blackness)+"%, "+this.opacity+")"},toHslString:function(){return"hsl("+this.hue+", "+Be(100*this.sat)+"%, "+Be(100*this.lightness)+"%)"},toHslStringDecimal:function(){return"hsl("+this.hue+", "+this.sat+", "+this.lightness+")"},toHslaString:function(){return"hsla("+this.hue+", "+Be(100*this.sat)+"%, "+Be(100*this.lightness)+"%, "+this.opacity+")"},toCmykString:function(){return"cmyk("+Be(100*this.cyan)+"%, "+Be(100*this.magenta)+"%, "+Be(100*this.yellow)+"%, "+Be(100*this.black)+"%)"},toCmykStringDecimal:function(){return"cmyk("+this.cyan+", "+this.magenta+", "+this.yellow+", "+this.black+")"},toNcolString:function(){return this.ncol+", "+Be(100*this.whiteness)+"%, "+Be(100*this.blackness)+"%"},toNcolStringDecimal:function(){return this.ncol+", "+this.whiteness+", "+this.blackness},toNcolaString:function(){return this.ncol+", "+Be(100*this.whiteness)+"%, "+Be(100*this.blackness)+"%, "+this.opacity},toName:function(){let e=ae("hexs"),t,n,o;for(i=0;i<e.length;i++)if(t=parseInt(e[i].substr(0,2),16),n=parseInt(e[i].substr(2,2),16),o=parseInt(e[i].substr(4,2),16),this.red===t&&this.green===n&&this.blue===o)return ae("names")[i];return""},toHexString:function(){let e=te(this.red),t=te(this.green),n=te(this.blue);return"#"+e+t+n},toRgb:function(){return{r:this.red,g:this.green,b:this.blue,a:this.opacity}},toHsl:function(){return{h:this.hue,s:this.sat,l:this.lightness,a:this.opacity}},toHwb:function(){return{h:this.hue,w:this.whiteness,b:this.blackness,a:this.opacity}},toCmyk:function(){return{c:this.cyan,m:this.magenta,y:this.yellow,k:this.black,a:this.opacity}},toNcol:function(){return{ncol:this.ncol,w:this.whiteness,b:this.blackness,a:this.opacity}},isDark:function(e){return(299*this.red+587*this.green+114*this.blue)/1e3<(e||128)},saturate:function(e){let t,n,r;return t=e/100||.1,this.sat+=t,1<this.sat&&(this.sat=1),n=K(this.hue,this.sat,this.lightness),r=q(n,this.opacity,this.hue,this.sat),this.attachValues(r),this},desaturate:function(e){let t,n,r;return t=e/100||.1,this.sat-=t,0>this.sat&&(this.sat=0),n=K(this.hue,this.sat,this.lightness),r=q(n,this.opacity,this.hue,this.sat),this.attachValues(r),this},lighter:function(e){let t,n,r;return t=e/100||.1,this.lightness+=t,1<this.lightness&&(this.lightness=1),n=K(this.hue,this.sat,this.lightness),r=q(n,this.opacity,this.hue,this.sat),this.attachValues(r),this},darker:function(e){let t,n,r;return t=e/100||.1,this.lightness-=t,0>this.lightness&&(this.lightness=0),n=K(this.hue,this.sat,this.lightness),r=q(n,this.opacity,this.hue,this.sat),this.attachValues(r),this},attachValues:function(e){this.red=e.red,this.green=e.green,this.blue=e.blue,this.hue=e.hue,this.sat=e.sat,this.lightness=e.lightness,this.whiteness=e.whiteness,this.blackness=e.blackness,this.cyan=e.cyan,this.magenta=e.magenta,this.yellow=e.yellow,this.black=e.black,this.ncol=e.ncol,this.opacity=e.opacity,this.valid=e.valid}};class ft{constructor(e){this.name=e,this._darker=0,this._lighter=0,this._alpha=void 0,this._default="initial"}getValue(){let e=Theme.getStyle(this.name);if(e instanceof Color){let t=new Color(e.toRgbaString());0<this._darker&&t.darker(this._darker),0<this._lighter&&t.lighter(this._lighter),e=t.toRgbaString(this._alpha)}return null===e?this._default:e}alpha(e){return this._alpha=e,this}darker(e){return this._darker+=e,this}lighter(e){return this._lighter+=e,this}}ft.prototype.default=function(e){return this._default=e,this},oe.prototype.add=function(e,t){return"object"==typeof e&&(e.hasOwnProperty("y")&&(t=e.y),e=e.x),this.x+=e,this.y+=t,this},oe.prototype.subtract=function(e,t){return"object"==typeof e&&(e.hasOwnProperty("y")&&(t=e.y),e=e.x),this.x-=e,this.y-=t,this},oe.prototype.multiply=function(e,t){return"object"==typeof e?(e.hasOwnProperty("y")&&(t=e.y),e.hasOwnProperty("x")&&(e=e.x)):void 0===t&&(t=e),this.x*=e,this.y*=t,this},oe.prototype.divide=function(e,t){return"object"==typeof e?(e.hasOwnProperty("y")&&(t=e.y),e.hasOwnProperty("x")&&(e=e.x)):void 0===t&&(t=e),this.x/=e,this.y/=t,this},ie.prototype=Object.create(oe.prototype),ie.prototype.constructor=ie,ie.prototype.inRect=function(e){return this.x>=e.x&&this.x<=e.x+e.w&&this.y>=e.y&&this.y<=e.y+e.h},se.prototype=Object.create(ie.prototype),se.prototype.constructor=se,se.prototype.multiply=function(e){return this.x*=e.x,this.y*=e.y,this.w*=e.w,this.h*=e.h,this},se.prototype.fit=function(e){let t=this.w/this.h,n=e.w/e.h;return t>=n?(this.h*=e.w/this.w,this.w=e.w):(this.w*=e.h/this.h,this.h=e.h),this},se.prototype.copyValuesFrom=function(e){this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h},de.prototype=Object.create(ie.prototype),de.prototype.constructor=de,de.prototype.normalize=function(){let e=je(this.x*this.x+this.y*this.y);return this.x=x/e,this.y=y/e,this};let _t={},yt=null;c(le),le.register=function(e,t,n){return(n=!1!==n,!_t.hasOwnProperty(e))?(_t[e]=new bt(e,t),le.triggerEvent("register",e),!0):n?(_t[e].updateStyles(t),Ge.logging&&d("Theme \""+e+"\" has been updated."),!0):(l("Theme with name \""+e+"\" is already registered."),!1)},le.switchTo=function(e){if(!_t.hasOwnProperty(e))return l("Theme can't be switched because theme \""+e+"\" is not registered."),!1;yt=_t[e];let t=document.getElementsByTagName("style");for(let n=0,r=t.length;n<r;n++)if(t[n].hasOwnProperty("ui")){let e=t[n].ui;t[n].innerHTML=nt.generateUIStyles(e)}return this.triggerEvent("switch"),!0},le.getStyle=function(e){if(null===yt)return l("Theme is not selected"),null;let t=e.split("."),n=t.pop();if(0===t.length)return yt.getStyle(n);let r=yt;do{let o=t.shift();if(!r.components.hasOwnProperty(o))return Ge.devMode&&l("Style with name \""+e+"\" is absent in the current theme \""+yt.name+"\"."),null;r=r.components[o]}while(0<t.length);return r.getStyle(n)},le.getThemeName=function(){return null===yt?(l("Theme is not selected"),null):yt.name},le.addSection=function(e,t){return null===yt?(l("Theme is not selected"),!1):yt.components.hasOwnProperty(e)?(l("Component \""+e+"\" already exists in the theme \""+yt.name+"\"."),!1):(yt.components[e]=new bt(e,t),!0)};class bt{constructor(e,t){if(this.name=e,this.styles={},this.components={},"object"==typeof t)for(let e in t)t.hasOwnProperty(e)&&("object"!=typeof t[e]||t[e]instanceof U?this.styles[e]=t[e]:this.components[e]=new bt(e,t[e]))}getStyle(e){return this.styles.hasOwnProperty(e)?this.styles[e]:(l("Style with name \""+e+"\" is absent in the current theme \""+le.getThemeName()+"\"."),null)}updateStyles(e){for(let t in e)e.hasOwnProperty(t)&&("object"!=typeof e[t]||e[t]instanceof U?this.styles[t]=e[t]:this.components.hasOwnProperty(t)?this.components[t].updateStyles(e[t]):this.components[t]=new bt(t,e[t]))}}let vt="csrf",wt=null,Ot={},xt={};ce.setRefiner=function(e,t){"function"==typeof t&&(Ot[e]=t)},ce.setParser=function(e,t){"function"==typeof t&&(xt[e]=t)},ce.parse=function(e){let t=e.match(/\?(&?[\w\d-_%]+=[\w\d-_%]*)+/gi),n=null!==t&&0<t.length?t[0]:"";e=e.replace(n,"").replace(window.location.origin,""),"?"===n[0]&&(n=n.slice(1));let r={},o=n.split("&");for(let t=0,n;t<o.length;t++)n=o[t].split("="),1<n.length&&(r[n[0]]=n[1]);for(let t in xt){let n=xt[t](e,r);e=n.url,r=n.params}return{route:e,params:r}},ue.prototype.gatherParams=function(e){let t=$(e);if(0===t.length)return this;let n=this;return t.find("input").each(function(){let e=$(this).attr("name");"string"==typeof e&&0<e.length&&(n.params[e]=this.value)}),t.find("select").each(function(){let e=$(this).attr("name");"string"==typeof e&&0<e.length&&(n.params[e]=this.value)}),t.find("textarea").each(function(){let e=$(this).attr("name");"string"==typeof e&&0<e.length&&(n.params[e]=this.value)}),this},ue.prototype.toString=function(){let e=[];for(let t in this.params)this.params.hasOwnProperty(t)&&e.push(encodeURIComponent(t)+"="+encodeURIComponent(this.params[t]));return this.path+(0===e.length?"":"?"+e.join("&"))},ue.prototype.removeParams=function(){for(let e=0;e<arguments.length;e++)delete this.params[arguments[e]]};let Pt={},Et=null,Ct=null,kt=null;c(ge),ge.register=function(e){return Pt[e]=new he(e),Pt[e]},ge.current=function(){return Et.clone()},ge.previous=function(){return kt},ge.currentParams=function(){return Ct},ge.apply=function(e,t){let n=ce.parse(e);e=n.route;let r=n.params;for(let n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);for(let n in t)0<=e.indexOf("{"+n+"}")&&(e.replace("{"+n+"}",encodeURIComponent(t[n])),delete t[n]);let o=ge(e);return null!==o&&(o.apply(t),!0)},ge.applyChain=function(e){0<e.length&&"/"===e[0]&&(e=e.slice(1));let t=ce.parse(e),n=t.route.split("/"),r=t.params,o;for(let t=0;t<n.length;t++){if(o=ge(n.slice(0,t+1).join("/")),null===o)return void l("Routes chain broken: route \""+n.slice(0,t).join("/")+"\" is absent.");o.apply(r)}},he.prototype={constructor:he,clone:function(){let e=new he(this.route);return e.params=this.params,e.__=this.__,e},apply:function(e){(void 0===e||null===e)&&(e=this.params),this.params=e;let t=new Event("apply",{cancelable:!0});if(void 0===e&&(e={}),ge.triggerEvent("apply",this.route,e,t),t.defaultPrevented)return!1;if(this.triggerEvent("apply",e,t),t.defaultPrevented)return!1;let n=ce.parse(window.location.pathname),r=n.route.split("/");1<r.length&&""===r[0]&&r.shift();let o=this.route.split("/");for(let t=0;t<o.length;t++)r.length>t&&("??"===o[t]?o[t]=r.slice(0,t+1).join("/"):"?"===o[t]&&(o[t]=r[t]));if(history.pushState(e,"",ce("/"+o.join("/"),e).replace("//","")),kt=Et,Et=this,Ct=e,kt instanceof he){if(t=new Event("leave",{cancelable:!0}),ge.triggerEvent("leave",kt.route,Et.route,t),t.defaultPrevented)return!0;kt.triggerEvent("leave",kt.route,Et.route,t)}return!0},runParentRoute:function(e){let t=this.route.split("/");if(2>t.length)return!1;t.pop();let n=t.join("/"),r=ge(n);if(null!==r){let t=new Event("apply",{cancelable:!0});if(r.triggerEvent("apply",e,t),!t.defaultPrevented)return r.apply(),!0}return!1},revert:function(){}},c(he.prototype),Et=ge.register("/");let Tt="en";fe.setLanguage=function(e){me(e)},fe.switchLanguageTo=fe.setLanguage,fe.getLanguage=function(){return Tt};let It={en:{},ru:{},es:{},de:{},pt:{},br:{},it:{},fr:{},jp:{},ko:{},zh:{}},Nt={en:{},ru:{},es:{},de:{},pt:{},br:{},it:{},fr:{},jp:{},ko:{},zh:{}},Lt=It.en;c(fe),fe.addTranslation=function(e,t){if(!It.hasOwnProperty(e)&&"object"==typeof t)for(let n in It)t.hasOwnProperty(n)&&(It[n][e]=t[n])};let St=ye,At="/localizations";fe.setLocalizationsPath=function(e){At=e},fe.getLocalizationsPath=function(){return At};let Bt={},Rt={};fe.on("categoryLoaded",function(e,t){if(Rt.hasOwnProperty(t)){let n=Rt[t];for(let t=0;t<n.length;t++)"function"==typeof n[t]&&n[t](e)}delete Rt[t]}),fe.loadTranslations=function(e,n){if(e=e.replace("\\","/"),"/"===e[0]&&(e=e.slice(1)),!0===Bt[e])return Rt.hasOwnProperty(e)||(Rt[e]=[]),"function"==typeof n&&Rt[e].push(n),!0;if(null===St)return l("Translations loader is not specified."),!1;if(Lt.hasOwnProperty(e)){if("function"==typeof n){let r=fe.getTranslations(e);n(r)}return!0}Bt[e]=!0;let r=setTimeout(function(){delete Bt[e]},1e4);return St(e,function(){delete Bt[e],clearTimeout(r);let o=fe.getTranslations(e);if(Rt.hasOwnProperty(e)&&Array.isArray(Rt[e]))for(let t=0;t<Rt[e].length;t++)Rt[e][t](o);fe.triggerEvent("categoryLoaded",o,e),"function"==typeof n&&n(o)}),!0},fe.registerTranslationsLoader=function(e){"function"==typeof e&&(null===St||St===ye)&&(St=e)},fe.getTranslations=function(e){function n(e,t){for(let n in r.hasOwnProperty(e)&&(e=r[e]),t)t.hasOwnProperty(n)&&(e=e.replace("{"+n+"}",t[n]));return e}if(Nt[Tt].hasOwnProperty(e))return Nt[Tt][e];let r=Lt;return r.hasOwnProperty(e)&&(r=r[e]),r!==Lt&&(Nt[Tt][e]=n),n},fe.on("langChange",function(){let e=document.querySelectorAll("*[localization]");for(let n=0;n<e.length;n++)if(e[n].T!==void 0){let r=e[n].getAttribute("localization"),o=fe.getTranslations(r);"INPUT"===e[n].tagName?e[n].setAttribute("placeholder",o(e[n].T)):e[n].innerText=o(e[n].T)}}),fe.on("translations",function(e){let n=fe.getTranslations(e),t=document.querySelectorAll("*[localization=\""+e+"\"]");for(let r=0;r<t.length;r++)void 0!==t[r].T&&("INPUT"===t[r].tagName?t[r].setAttribute("placeholder",n(t[r].T)):t[r].innerText=n(t[r].T))}),c(be);class Ht extends f{constructor(e){super(e),this.useCsrf=!e.hasOwnProperty("useCsrf")||e.useCsrf,this.url=e.hasOwnProperty("url")?e.url:"",this.method=e.method||"POST",this.collector=ve,this.headers=e.headers||{"X-Requested-With":"XMLHttpRequest"},this.hasError=!1}triggerErrorEvents(e){this.hasError=!0;let t=new Event("error",{cancelable:!0});return this.triggerEvent("error",e,t),Ht.triggerEvent("error",this,e,t),t}triggerRedirectionEvents(e,t){let n=new Event("redirect",{cancelable:!0});return this.triggerEvent("redirect",e,t,n),Ht.triggerEvent("redirect",this,e,t,n),n}}c(Ht);let jt={};class Dt extends f{constructor(e){super(e),this.ws=e.ws,this.collector=we}}c(Dt),Oe.FORMAT_JSON="json",Oe.FORMAT_TOKENIZED_JSON="tokenized-json",Oe.FORMAT_RAW="text",Oe.prototype={},c(Oe.prototype),Oe.prototype.connect=function(){if(null!==this.conn)return;let e=new WebSocket(this.url);this.conn=e;let t=this,n;e.onopen=function(){null!==t.authRequestMessage&&t.conn.send(t.authRequestMessage),clearInterval(n),t.triggerEvent("connect")},e.onclose=function(){t.authorized=!1,t.conn=null,t.tokens={},n=setTimeout(function(){t.connect()},t.reconnectionInterval),t.triggerEvent("disconnect")},e.onmessage=function(n){if(null!==t.authRequestMessage){if(n.data===t.authSuccessMessage)return t.authorized=!0,void t.triggerEvent("authSuccess");if(n.data===t.authFailMessage)return t.authorized=!1,void t.triggerEvent("authFail")}if(t.format===Oe.FORMAT_RAW)t.triggerEvent("message",n.data);else if(t.format===Oe.FORMAT_JSON)t.triggerEvent("message",JSON.parse(n.data));else if(t.format===Oe.FORMAT_TOKENIZED_JSON){let e=JSON.parse(n.data);if(!e.hasOwnProperty("Token"))return void t.triggerEvent("message",e);let r=e.Token;if(delete e.Token,!t.tokens.hasOwnProperty(r))return;e.hasOwnProperty("Data")&&(e=e.Data),t.triggerEvent("message",e),t.triggerEvent("response",e),t.tokens[r](e),delete t.tokens[r]}}},Oe.prototype.send=function(e,t){if(null!==this.conn){let n=new Pe(e);this.tokens[n.token]=t;let r={data:n};this.triggerEvent("beforeSend",r),this.conn.send(JSON.stringify(r.data)),this.triggerEvent("send",r.data)}};let Ut=Symbol("isAdded");class Mt extends f{constructor(e,t){t===void 0&&(t={}),super(t),this.throttle=t.throttle||0,this.entityClass=e,c(this.entityClass.prototype),this.entities=[]}add(e,t){return e instanceof this.entityClass||(e=this.createEntity(e)),!!(0>this.entities.indexOf(e)&&!1===e[Ut])&&(e[Ut]=!0,this.entities.push(e),!1!==t&&(this.triggerEvent("add ~"+this.throttle,e),this.triggerEvent("change ~"+this.throttle,e)),!0)}addMultiple(e,t){let n=0;for(let r=0;r<e.length;r++)this.add(e[r],!1)&&n++;return!1!==t&&(this.triggerEvent("add ~"+this.throttle,null),this.triggerEvent("change ~"+this.throttle,null)),n}remove(e,t){let n=this.entities.indexOf(e);return!!(0<=n)&&(e[Ut]=!1,this.entities.splice(n,1),!1!==t&&(this.triggerEvent("remove",e),this.triggerEvent("change ~"+this.throttle)),!0)}removeAll(e){for(let t=0;t<this.entities.length;t++)this.entities[t][Ut]=!1;return this.entities=[],!1!==e&&this.triggerEvent("change ~"+this.throttle),this}count(){return this.entities.length}length(){return this.entities.length}createEntity(e){let t=new this.entityClass(e),n={},r=this;for(let o in t)t.hasOwnProperty(o)&&o!==Ut&&(n[o]=t[o],delete t[o],Object.defineProperty(t,o,{enumerable:!0,set:function(e){n[o]=e,t[Ut]&&r.triggerEvent("change ~"+r.throttle,t)},get:function(){return n[o]}}));return Object.defineProperty(t,Ut,{enumerable:!1,set:function(e){n[Ut]=!0===e},get:function(){return n[Ut]}}),t[Ut]=!1,t}set onChange(e){this.on("change",e)}set onAdd(e){this.on("add",e)}set onRemove(e){this.on("remove",e)}}c(Mt.prototype),Mt.isEntityAdded=function(e){return!0===e[Ut]};let Ft=null;c(Ee),Ee.isGuest=function(){return null===Ft},Ee.getUser=function(){return Ft},Ce.prototype={constructor:Ce,fullName:function(){return this.firstName+" "+this.secondName}},Ee.changeUser=function(e){let t=new Ce(e);Ee.triggerEvent("changeUser",Ft,t),Ft=t},Te.ordinal=function(e){e=parseFloat(e);return 11<=e%100&&13>=e%100?e+"th":e+["th","st","nd","rd","th","th","th","th","th","th"][e%10]},Te.monthShortName=function(e,t){t===void 0&&(t=fe.getLanguage());return{en:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ru:["\u042F\u043D\u0432.","\u0424\u0435\u0432.","\u041C\u0430\u0440.","\u0410\u043F\u0440.","\u041C\u0430\u0439","\u0418\u044E\u043D.","\u0418\u044E\u043B.","\u0410\u0432\u0433.","\u0421\u0435\u043D.","\u041E\u043A\u0442.","\u041D\u043E\u044F.","\u0414\u0435\u043A."]}[t][e]},Te.date=function(e,t){return void 0===t&&(t="d m Y"),Ie(e,t)},Te.time=function(e,t){return Te.date(e,t===void 0?"H:i":t)},Te.money=function(e,t){return null===e?"":(("EUR"===t?"\u20AC":"$")+" "+parseFloat(e)).replace(",",".")};let Gt={};Ne.prototype={},c(Ne.prototype),H.error=p,H.warn=l,H.log=d,H.Theme=le,H.Extension=m,H.L10n=fe,H.setLanguage=fe.setLanguage,H.getLanguage=fe.getLanguage,H.Identity=Ee,H.Format=Te,H.Interface=B,H.Data=f,H.Ajax=Ht,H.DataWS=Dt,H.WSData=Dt,H.WS=Oe,H.XY=oe,H.Point=ie,H.Vector=de,H.Rect=se,H.Storage=Mt,H.setCsrfToken=pe,H.layout=D,H.Url=ce,H.Route=ge,H.GlobalEvents=be,H.Animation=Ze,H.EventsChannel=Le,H.enableDevMode=function(e){Ge.devMode=!1!==e},H.enableLogging=function(e){Ge.logging=!1!==e},window.UI=H,window.Extension=m,window.L10n=fe,window.Layout=D,window.Interface=B,window.Animation=Ze,window.GlobalEvents=be,window.EventsChannel=Le,window.Animation=Ze,window.Data=f,window.DataAjax=Ht,window.Ajax=Ht,window.DataWS=Dt,window.WS=Oe,window.Storage=Mt,window.Color=U,window.StyleGetter=ft,window.Theme=le,window.Point=ie,window.Rect=se,window.Vector=de,window.Identity=Ee,window.Format=Te,window.Route=ge,window.Url=ce,window.URL=ue,window.UI.mouseX=0,window.UI.mouseY=0,window.UI.isTabletScreen=function(){return 800<window.innerWidth&&1024>window.innerWidth},window.UI.isPhoneScreen=function(){return 240<window.innerWidth&&640>window.innerWidth},document.addEventListener("mousemove",function(t){window.UI.mouseX=t.touches===void 0?t.clientX:t.touches[0].clientX,window.UI.mouseY=t.touches===void 0?t.clientY:t.touches[0].clientY}),function(){function e(e){e.close()}function t(n,r){50<He(r.clientX-t._x)||50<He(r.clientY-t._y)||r.target!==n.wrap.__.node||n.close()}L10n.addTranslation("modal",{ru:{"To top":"\u041D\u0430\u0432\u0435\u0440\u0445","To bottom":"\u0412\u043D\u0438\u0437","Loading...":"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430..."}}),UI.register({name:"Modal",localization:"modal",translations:{label:"Loading..."},scheme:{wrap:{scrollingButtons:{scrollTopButton:"(text = a)",scrollBottomButton:"(text = b)"},overlay:{closeButton:"(html = \u2715)",progressBar:{label:"",track:{bar:""}},skeleton:"",content:""}}},params:{width:"15rem",height:"6rem",scrollingButtons:!0,closeOnBlur:!0,closeButton:!0,skeleton:""},methods:{applyParams(e){return this.overlay.css({width:e.width,minHeight:e.height}),e.closeButton||this.closeButton.hide(),e.scrollingButtons?(this.content.on("load",function(){this.UII().updateScrollingButtons()}),this.content.on("renderInside",()=>{setTimeout(()=>{this.updateScrollingButtons()},1e3)})):this.scrollingButtons.hide(),!0===e.closeOnBlur&&(this.wrap.on("mousedown",(e,n)=>{t._x=n.clientX,t._y=n.clientY}),this.wrap.on("click",t)),this},setSkeleton(e){this.params().skeleton=e},showSkeleton(){let e=UI(this.params().skeleton);return null!==e&&0===this.skeleton.children().length&&e.renderTo(this.skeleton),this.skeleton.fadeIn(150,"flex"),this},hideSkeleton(){return this.skeleton.fadeOut(),this},trackProgress(e){this.bar.css({width:"10%"}),this.progressBar.css({display:"flex",opacity:1}),e.on("progress",e=>{let t=e/100*this.track.outerWidth();this.bar.animate({width:t+"px"},100)}),this.showSkeleton(),this.content.css({maxHeight:this.skeleton.outerHeight()+"px"}),e.on("complete",()=>{this.bar.css({boxShadow:"0 0 15px "+Theme("colors.secondary").alpha(.25).getValue()}),setTimeout(()=>{this.progressBar.fadeOut(500),this.content.css({maxHeight:"initial"}),this.hideSkeleton(),setTimeout(()=>{this.progressBar.hide()},500)},250)}),e.on("error",(e,t)=>{t.defaultPrevented||(t.preventDefault(),this.content.removeChildren(),404===e?UI("Not found message").renderTo(this.content):403===e?UI("Forbidden message").renderTo(this.content):500==e&&UI("Server error message").renderTo(this.content))})},hide(){return this.overlay.css({transform:"scale(1)"}),this.wrap.css({transition:"0.15s"}),setTimeout(()=>{this.wrap.removeClass("shown"),this.overlay.css({transform:"scale(1.2)"}),this.triggerEvent("hide"),this.triggerEvent("close"),setTimeout(()=>{this.remove()},150)},25),this},close(){this.hide()},scrollBottom(){let e=this.params(),t=this,n=this.wrap.scrollTop();return void 0!==e.ani&&e.ani.stop(),e.ani=new Animation({duration:1e3}),e.ani.run(function(e){t.wrap.scrollTop(n+(t.wrap.scrollHeight()-t.wrap.outerHeight()-n)*e)}),this},scrollTop(){let e=this.params(),t=this,n=this.wrap.scrollTop();e.ani!==void 0&&e.ani.stop(),e.ani=new Animation({duration:1e3}),e.ani.run(function(e){t.wrap.scrollTop(n+(0-n)*e)})},updateScrollingButtons(){return this.wrap.scrollHeight()<=this.wrap.outerHeight()?this.scrollingButtons.hide():this.scrollingButtons.show("flex"),this}},onRender(t,n){t.applyParams(n),t.wrap.addEventListener("scroll",function(e){let t=100*(this.__.node.scrollTop/(this.__.node.scrollHeight-this.__.node.offsetHeight));e.overlay.css({transformOrigin:"center "+parseInt(t)+"%"})}),setTimeout(function(){t.wrap.addClass("shown"),setTimeout(function(){t.overlay.css({transform:"initial"})},250)},50),t.closeButton.on("click",e),t.scrollTopButton.on("click",e=>e.scrollTop()),t.scrollBottomButton.on("click",e=>e.scrollBottom())},onLoad(e,t,n){n.preventDefault(),e.content.load(t)},styles:{"@media print":{".overlay":{boxShadow:"none"}},wrap:{display:"flex",position:"fixed",flexDirection:"column",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent",justifyContent:"flex-start",alignItems:"center",overflowY:"scroll",zIndex:1e3,transition:"0.75s","::-webkit-scrollbar-track":{backgroundColor:"#fff"},"::-webkit-scrollbar":{width:"8px",backgroundColor:"transparent"},"::-webkit-scrollbar-thumb":{backgroundColor:Theme("colors.primary").default("#000")},".shown":{backgroundColor:"rgba(0,0,0,0.25)"},".shown > div":{opacity:1,transform:"scale(1)"},scrollingButtons:{display:"none",flexDirection:"column",width:"50%",height:"100%",position:"fixed",right:"9px",top:0," > *":{display:"flex",width:"100%",height:"50%",justifyContent:"flex-end",color:"rgba(255,255,255,0.75)",padding:"0.5rem 1rem",fontSize:"1.8rem",fontWeight:600,fontFamily:"Icons, sans-serif",transition:"0.25s"},scrollTopButton:{cursor:"default",alignItems:"flex-end",backgroundImage:"linear-gradient(-45deg, rgba(0, 0, 0, 0.15) 7%, rgba(0, 0, 0, 0.05) 7%, rgba(0, 0, 0, 0.05) 10%, transparent 10%)"},scrollBottomButton:{cursor:"default",backgroundImage:"linear-gradient(-135deg, rgba(0, 0, 0, 0.15) 7%, rgba(0, 0, 0, 0.05) 7%, rgba(0, 0, 0, 0.05) 10%, transparent 10%)"}," > *:hover":{backgroundColor:"rgba(0,0,0,0.12)"}},overlay:{display:"flex",flexDirection:"column",minWidth:"10rem",maxWidth:"calc(100% - 2rem)",minHeight:"6rem",backgroundColor:"#ffffff",borderRadius:Theme("overlay.borderRadius").default("0.15rem"),margin:"1rem 0",flexShrink:0,flexGrow:0,transform:"scale(1.2)",opacity:0,transition:"0.15s",boxShadow:"0 0 1rem rgba(0,0,0,0.25)",position:"relative",transformOrigin:"center top",overflow:"hidden",progressBar:{display:"none",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",width:"100%",height:"100%",position:"absolute",left:0,top:0,zIndex:1e5,label:{fontWeight:300,marginBottom:"0.5rem",color:"#555",fontSize:"0.85rem",marginTop:"3rem",display:"none"},track:{width:"100%",height:"0.25rem",backgroundColor:"#ddd",bar:{width:0,height:"0.25rem",backgroundColor:Theme("colors.secondary"),transition:"0.15s"}}},"> .buttons":{display:"flex",justifyContent:"flex-end",padding:"0.6rem",backgroundColor:Theme("colors.lightestGray")},skeleton:{width:"100%",display:"none",position:"absolute",top:0,left:0,backgroundColor:"#fff",minWidth:"20rem",zIndex:99999},content:{display:"flex",flexDirection:"column",overflow:"hidden",transition:"0.15s"},closeButton:{display:"flex",justifyContent:"center",alignItems:"center",width:"2.5rem",lineHeight:"2.5rem",height:"2.5rem",position:"absolute",top:0,right:0,cursor:"default",zIndex:5e3,":hover":{backgroundColor:"rgba(0,0,0,0.05)"}}}}}}),t._x=0,t._y=0}(),function(){UI.register({name:"Tabs",scheme:{wrap:{labels:"|Tabs / Label",contents:"|Tabs / Content"}},methods:{addTab(e,t){void 0===t&&(t=this.contents.addOne().getRootElement());let n=this.labels.addOne({label:e});return n.getRootElement().applyExtension("Tab",{label:e,content:t}),this.activateTab(0),n},removeTab(e){let t=this.getTabByLabel(e);return null===t?this:(t.getLabel().removeExtension("Tab"),t.getLabel().hasClass("active")&&this.activateTab(0),t.remove(),this)},hideTab(e){let t=this.getTabByLabel(e),n=0;return(this.getTabByIndex(0)===t&&(n=1),null===t)?this:(t.getLabel().hasClass("active")&&this.activateTab(n),t.getLabel().hide(),this)},showTab(e){let t=this.getTabByLabel(e);return null===t?this:(t.getLabel.show("flex"),this)},getContentFor(e){let t=this.getTabByLabel(e);return null===t?null:t.getContent()},hideAllContents(){let e=this.contents.children();for(let t=0;t<e.length;t++)e[t].getRootElement().hide()},deactivateAllLabels(){let e=this.labels.children();for(let t=0;t<e.length;t++)e[t].getRootElement().removeClass("active")},getTabByLabel(e){let t=this.labels.children();for(let n=0;n<t.length;n++)if(t[n].params().label===e)return t[n];return null},getTabByIndex(e){let t=this.labels.children();for(let n=0;n<t.length;n++)if(n===e)return t[n];return null},getTab(e){let t=this.getTabByLabel(e);return null===t&&(t=this.getTabByIndex(e)),t},activateTabByLabel(e){this.hideAllContents(),this.deactivateAllLabels();let t=this.getTabByLabel(e);return null!==t&&(t.getLabel().addClass("active"),t.getContent().addClass("active").show()),this},activateTabByIndex(e){this.hideAllContents(),this.deactivateAllLabels();let t=this.getTabByIndex(e);return null!==t&&(t.getLabel().addClass("active"),t.getContent().addClass("active").show()),this},activateTab(e){this.hideAllContents(),this.deactivateAllLabels();let t=this.getTab(e);return null!==t&&(t.getLabel().addClass("active"),t.getContent().addClass("active").show()),this},removeAllTabs(){let e=this.contents.children();for(let t=0;t<e.length;t++)e[t].remove();return this}}}),UI.register({name:"Tabs / Label",scheme:{wrap:""},params:{label:""},methods:{getLabel(){return this.wrap},getContent(){return this.wrap.extension("Tab").params.content}},onRender(e,t){e.wrap.text(t.label)}}),UI.register({name:"Tabs / Content",scheme:{wrap:""}})}(),function(){Theme.register("Dark",{colors:{},fonts:{}})}(),function(){Theme.register("Default",{colors:{},fonts:{}})}(),function(){Theme.register("Light",{colors:{},fonts:{}})}(),function(){Interface.register("Form",["validate()","requireField(field)","submit()","reset()"]),Interface.register("Input",["val(value)","disable()","enable()","focus()","blur()","name(value)","placeholder(value)","required(value)"]),Interface.register("Button",["text(value)","disable()","enable()","focus()","blur()","onClick(handler)"]),Interface.register("Labeled",["label(value)"])}(),function(){Interface.register("Spinner",["show()","hide()"]),Interface.register("Calendar",["outputFormat(template)","valueFormat(template)","format(template)","year(value)","month(value)","day(value)","daysInMonth(monthIndex)"]),Interface.register("Tabs",["localization(category)","addTab(label, target)","activeTab(label)","tabByLabel(label)","hideTab(label)","showTab(label)"]),Interface.register("Overlay",["trackProgress(ajax)","setSkeleton(name)","showSkeleton()","hideSkeleton()","close()"]),Interface.register("Alert",["info(title, message, image)","warn(title, message, image)","error(title, message, image)"])}(),function(){Interface.register("Identified",["getId()","setId(id)"]),Interface.register("Translated",["translation(field, lang)"]),Interface.register("Progressive",["getProgress()","onComplete(callback)"]),Interface.register("Yes/No",["yes()","no()","onYes(callback)","onNo(callback)","onAnswer(callback)"]),Interface.register("Draggable",["getHandle()"])}(),function(){Extension.register("Active trigger",{params:{activeClass:"active"},onApply(e){let t=e.target,n=e.params,r=n.activeClass;n.handler=function(e,n){let o=n.target,s=t.node();for(;o.parentNode!==s&&o!==document.body&&null!==o;)o=o.parentNode;if(o.parentNode===s){let e=s.childNodes;for(let t=0;t<e.length;t++)e[t].classList.remove(r);o.classList.add(r)}},t.on("click",n.handler)},onRemove(e){e.target.off("click",e.params.handler)}})}(),function(){Extension.register("Throttle event",{params:{delay:0,event:"input",callback:null},onApply(e){function t(e,t){o.apply(e,t)}let n=e.params,r=null,o=n.callback||n.handler;n.newCallback=function(){clearTimeout(r),r=setTimeout(t,n.delay,this,arguments)},e.target.on(n.event,n.newCallback)},onUpdate(e,t){function n(e,t){s.apply(e,t)}let r=e.params,o=null;for(let n in e.target.off(r.event,r.newCallback),t)t.hasOwnProperty(n)&&r.hasOwnProperty(n)&&(r[n]=t[n]);let s=r.callback||r.handler;r.newCallback=function(){clearTimeout(o),o=setTimeout(n,r.delay,this,arguments)},e.target.on(r.event,r.newCallback)},onRemove(e){let t=e.params;e.target.off(t.event,t.newCallback)}})}(),function(){Extension.register("Popover",{params:{side:"top",hideOnBlur:!0,fadingTime:150,popover:null},onApply(e,t,n){null===n.popover&&(n.popover=document.createElement("div"))}})}(),function(){Extension.register("Number filter",{params:{fractional:!0,negative:!0,precision:4,min:!1,max:!1},onApply(e){let t=e.target,n=e.params;return UI.isElement(t)||!UI.isInstance(t)||t.isImplementationOf("Input")?void(n.inputHandler=function(){let e=this.val().trim().replace(",",".").replace(/[^\d.-]/gi,"");if(0===e.length)return void this.val("");let t=e.split(".");2<t.length&&(t=t.slice(0,2)),n.fractional&&0<n.precision?1<t.length&&(t[1]=t[1].slice(0,n.precision-1)):t=[t[0]],"."===t[0][0]&&(t[0]="0"+t[0]),t[0]=n.negative&&"-"===t[0][0]?"-"+t[0].slice(1).replace(/[^\d]/g,""):t[0].replace("-",""),"-"===t[0]?e=t.join("."):(e=parseFloat(t.join(".")),(isNaN(e)||!1!==n.min&&e<n.min)&&(e=n.min),!1!==n.max&&e>n.max&&(e=n.max)),this.val(e),this.focus()},n.changeHandler=function(){let e=this.val().trim().replace(",",".").replace(/[^\d.-]/gi,"");"."===e[e.length-1]&&(e=e.slice(0,-1),this.val(e))},t.on("input",n.inputHandler),t.on("change",n.changeHandler)):void UI.error("Extension \""+e.name+"\": target doesn't implement \"Input\" interface:","\n\n",Interface("Input").toString(),"\n ")},onRemove(e){e.target.off("input",e.params.inputHandler),e.target.off("change",e.params.changeHandler)}})}(),function(){function e(t,n){n.preventDefault();let e=this.extension("Drag");if(null===e&&(e=this.instance().extension("Drag")),null===e)return;let _=e.target,b=e.params.targetElement,v=new Event("dragStart",{cancelable:!0});if(_.triggerEvent("dragStart",t,v),_!==this&&this.triggerEvent("dragStart",t,v),v.defaultPrevented)return;g=e.params.x,h=e.params.y,m=e.params.withinParent,f=e.params.useBoundaries;let w=b.node().parentNode.style.position;m&&("static"===w||""===w)&&(b.node().parentNode.style.position="relative"),s=void 0===n.touches?n.clientX:n.touches[0].clientX,d=void 0===n.touches?n.clientY:n.touches[0].clientY;let O=b.clientRect();l=O.top,p=O.left,O=b.node().parentNode.getBoundingClientRect();let P=getComputedStyle(b.node().parentNode),E=parseInt((P.borderLeftWidth+"").replace("px","")),C=parseInt((P.borderTopWidth+"").replace("px",""));c=O.top+C,u=O.left+E,r=this,o=e,b.addClass("dragged")}function t(t){if(null===r)return;let e=r.extension("Drag");if(null===e&&(e=r.instance().extension("Drag")),null===e)return;let n=e.target,o=e.params.targetElement,_=void 0===t.touches?t.clientX:t.touches[0].clientX,b=void 0===t.touches?t.clientY:t.touches[0].clientY,v=_-s,w=b-d,O=m?l-c:l,P=m?p-u:p,E=P+v,C=O+w;if(f){if(0>E&&(E=0),m){let e=o.__.node.clientWidth,t=o.__.node.parentNode.clientWidth;E>t-e&&(E=t-e)}if(0>C&&(C=0),m){let e=o.__.node.clientHeight,t=o.__.node.parentNode.clientHeight;C>t-e&&(C=t-e)}}let k=new Event("drag",{cancelable:!0}),T=new Point(P,O),I=new Point(E,C),N=new Point(v,w);if(n.triggerEvent("drag",o.instance(),T,N,k),n!==o&&o.triggerEvent("drag",o.instance(),T,N,k),!k.defaultPrevented){let e={position:m?"absolute":"fixed"};g&&(e.left=I.x+"px"),h&&(e.top=I.y+"px"),o.css(e)}}function n(t){if(null!==r&&null!==o){let e=o.target,n=o.params.targetElement;e.triggerEvent("dragEnd",n.instance(),t),n.triggerEvent("dragEnd",n.instance(),t),n.removeClass("dragged")}r=null,o=null}Extension.register("Drag",{params:{x:!0,y:!0,withinParent:!0,useBoundaries:!1,handle:null},onApply(t){let n=t.target,r=t.params;if(r.targetElement=UI.isElement(n)?n:n.getRootElement(),null===r.handle){let e=n;if(UI.isElement(n)&&(e=n.instance()),!UI.isInstance(e))return void UI.error("Target for the \"Drag\" extension must be an instance or an element.");r.handle=e.isImplementationOf("Draggable")?e.getHandle():r.targetElement}r.handle.__.extensions.Drag=t,r.handle.on("mousedown",e),r.handle.on("touchstart",e)},onUpdate(e,t){let n=e.params;for(let r in t)t.hasOwnProperty(r)&&n.hasOwnProperty(r)&&(n[r]=t[r])},onRemove(t){t.target.off("mousedown",e),t.target.off("touchstart",e)},getDragged(){return r}});let r=null,o=null,s=0,d=0,l=0,p=0,c=0,u=0,g=!0,h=!0,m=!0,f=!1;document.addEventListener("mousemove",t),document.addEventListener("touchmove",t),document.addEventListener("mouseup",n),document.addEventListener("touchend",n)}(),function(){Extension.register("Sortable",{params:{x:!0,y:!0,placeholderClass:"placeholder"},onApply(e){function t(e){let t=document.createElement("div");t.className=r.placeholderClass,t.style.width=e.outerWidth()+"px",t.style.height=e.outerHeight()+"px",t.style.position="fixed",t.style.cursor="default !important",t.style.zIndex=1e6,document.body.appendChild(t),t.innerHTML=e.node().outerHTML,t.firstChild.style.opacity=d;let n=e.node().getElementsByTagName("input"),o=t.getElementsByTagName("input");for(let t=0;t<n.length;t++)o[t].value=n[t].value;return t}let n=e.target,r=e.params,o=null,s=null,d=1;r.downHandler=function(e,t,n,r){r.preventDefault()},r.dragStartHandler=function(e){UI.isInstance(this)&&(e=this);let t=e.getRootElement();d=""===t.node().style.opacity?d:t.node().style.opacity,t.css({opacity:.25})},r.dragHandler=function(e,d,l,p){p.preventDefault(),UI.isInstance(this)&&(e=this);let c=UI.isElement(this)?this:e.getRootElement();null===o&&(o=t(e.getRootElement()));let u=d.x+l.x,g=d.y+l.y;o.style.top=g+"px",o.style.left=r.x?u+"px":d.x+"px";let h=n.children();for(let t=0,r=h.length,o;t<r;t++){o=h[t].getRootElement(),null!==s&&(n.node().removeChild(s),s=null);let e=o.clientRect(),r=e.height/2;if(o!==c){if(null===o.node().previousSibling&&g<e.top+r||g<e.top+r&&g>e.top-r){if(o.node().previousSibling===c.node())continue;return s=document.createElement("div"),s.style.height=o.outerHeight()+"px",s.style.width="1px",void n.node().insertBefore(s,o.node())}if(null===o.node().nextSibling&&g>e.top+r||g>e.top+r&&g<e.top+e.height+r){if(o.node().nextSibling===c.node())continue;return s=document.createElement("div"),s.style.height=o.outerHeight()+"px",s.style.width="1px",null===o.node().nextSibling&&n.node().appendChild(s),void n.node().insertBefore(s,o.node().nextSibling)}}}},r.dropHandler=function(e){UI.isInstance(this)&&(e=this);let t=UI.isElement(this)?this:e.getRootElement();null!==o&&null!==o.parentNode&&(o.parentNode.removeChild(o),o=null),null!==s&&(t.node().parentNode.removeChild(t.node()),n.node().replaceChild(t.node(),s),s=null,n.triggerEvent("sort",t)),e.getRootElement().css({opacity:d||1})};let l=n.children();for(let t=0,n;t<l.length;t++)n=l[t],Extension("Drag").applyTo(n,{withinParent:!1,x:r.x,y:r.y}),n.on("dragStart",r.dragStartHandler),n.on("drag",r.dragHandler),n.on("dragEnd",r.dropHandler);n.on("add",e=>{let t=e.getRootElement();t.applyExtension("Drag",{withinParent:!1,x:r.x,y:r.y}),t.on("dragStart",r.dragStartHandler),t.on("drag",r.dragHandler),t.on("dragEnd",r.dropHandler)})},onRemove(){},onUpdate(){}})}(),function(){function e(e){let t=this.extension("Tab"),n=this.parent(),r=t.params.content.parent(),o=n.children(),s=t.params.activeClass,d=t.params.content;for(let t=0,n;t<o.length;t++)n=o[t].getRootElement(),null===n.extension("Tab")||n.removeClass(s);this.addClass(s),o=r.children();for(let t=0,n;t<o.length;t++)n=o[t].getRootElement(),n!==d&&n.removeClass(s).fadeOut(150);setTimeout(function(){d.addClass(s).fadeIn(150,"flex")},160),this.triggerEvent("ext:tab.click",e)}Extension.register("Tab",{params:{label:"",content:null,activeClass:"active"},onApply(n){let r=n.params;return null===r.content?void UI.warn("No content specified for the extension \"Tab\"."):void(""===r.label&&(r.label=t++ +"",1e7<t&&(t=0)),n.target.on("click",e))},onRemove(t){t.target.off("click",e)}});let t=0}(),function(){Extension.register("Load more",{params:{url:"/load-more",method:"GET",form:null,type:"from",scrollThreshold:100,dummies:10,dummyClass:"dummy"},onApply(e){let t=e.target,n=e.params,r=n.form,o=n.type,s=0,d=null,l=n.dummies||0,p=n.dummyClass||"dummy",c=new Ajax({url:n.url,method:n.method,allowMultiple:!1}),u=!0;c.on("complete",()=>u=!0),n.loadHandler=e=>{if(Array.isArray(e)&&0<e.length){let e=t.node().getElementsByClassName(p);for(let n=0,r=e.length;n<r;n++)t.node().removeChild(e[0])}},t.on("load",n.loadHandler),n.afterLoadHandler=e=>{if(!(Array.isArray(e)&&0<e.length&&0<l))t.triggerEvent("loadMore",[]);else if(t.triggerEvent("loadMore",e),0<t.children().length)for(let e=0,n;e<l;e++)n=document.createElement("div"),n.className=p,t.node().appendChild(n)},t.on("afterLoad",n.afterLoadHandler),n.handler=()=>{let l=100*(t.scrollTop()/(t.scrollHeight()-t.outerHeight())),p=t.children(),g=p[p.length-1];if(u&&l>=n.scrollThreshold&&(1<=l||isNaN(l))&&250<=Date.now()-s&&d!==g){let n=null===r||r===void 0?{}:r.gatherData(!0);if(!("from"===o))n.offset=t.children().length;else if(g.isImplementationOf("Identified"))n.from=g.getId();else return void UI.error("Extension \""+e.name+"\": Last item doesn't implement \"Identified\" interface:","\n\n",Interface("Identified").toString(),"\n ");u=!1,s=Date.now(),c.params(n).fetch(e=>{s=Date.now();Array.isArray(e)&&(0===e.length&&(d=g),t.load(e,!1,!1))})}},t.on("scroll",n.handler)},onRemove(e){e.target.off("scroll",e.params.handler),e.target.off("scroll",e.params.loadHandler),e.target.off("scroll",e.params.afterLoadHandler)},onUpdate(){}})}(),function(){Extension.register("Dropdown",{params:{side:"auto",target:null},onApply(e){let t=e.target,n=e.params,r=n.target;t.__._dropdownContent=r,r.css({display:"none"}),n.clickHandler=function(){let e=!this.hasClass("dropdown-expanded"),n=new Event("blur",{cancelable:!0});e?(t.addClass("dropdown-expanded"),r.addClass("dropdown-expanded"),n=new Event("expand",{cancelable:!0}),r.triggerEvent("expand",this,n),!n.defaultPrevented&&r.slideDown(100,()=>r.css({display:"flex"}))):(t.removeClass("dropdown-expanded"),r.removeClass("dropdown-expanded"),n=new Event("collapse",{cancelable:!0}),r.triggerEvent("collapse",this,n),!n.defaultPrevented&&r.slideUp(100,()=>r.css({display:"none"})))},t.on("click",n.clickHandler)},onRemove(e){e.target.off("click",e.params.clickHandler),delete e.target.__._dropdownContent}}),document.addEventListener("mousedown",function(t){let e=t.target;for(;null!==e;){if(UI.isElement(e.element)&&e.element.hasClass("dropdown-expanded")){e=e.element.node();break}e=e.parentNode}let n=document.getElementsByClassName("dropdown-expanded");n=Array.prototype.slice.call(n,0);for(let r=0,o=n.length;r<o;r++)if(n[r]!==e&&UI.isElement(n[r].element)&&UI.isElement(n[r].element.__._dropdownContent)){let t=n[r].element,o=t.__._dropdownContent;if(o.node()===e||t.node()===e)continue;t.removeClass("dropdown-expanded"),o.removeClass("dropdown-expanded");let s=new Event("collapse",{cancelable:!0});o.triggerEvent("collapse",o,s),s.defaultPrevented||o.slideUp(100,function(){o.css({display:"none"})})}})}()})();
//# sourceMappingURL=ui-builder.min.js.map
